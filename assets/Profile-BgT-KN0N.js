import{j as e,z as C,r as n,Y as j,$ as M,bk as k,bl as S,bm as D,ai as P,B as c,a1 as T,L as p,bn as E,bo as B,t as f}from"./index-W2AL0DnC.js";const a=({title:t,children:r})=>e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx("h3",{className:"text-black mb-2 mt-4 text-sm opacity-50",children:t}),e.jsx("div",{className:"mb-2",children:r})]}),F=t=>e.jsxs("svg",{"data-name":"Group 453",xmlns:"http://www.w3.org/2000/svg",width:22.544,height:22.233,viewBox:"0 0 22.544 22.233",...t,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"a",x1:.5,x2:.5,y2:1,gradientUnits:"objectBoundingBox",children:[e.jsx("stop",{offset:0,stopColor:"#62096c"}),e.jsx("stop",{offset:1,stopColor:"#a2418d"})]}),e.jsx("clipPath",{id:"b",children:e.jsx("path",{"data-name":"Rectangle 286",fill:"url(#a)",d:"M0 0h22.544v22.233H0z"})})]}),e.jsxs("g",{"data-name":"Group 290",clipPath:"url(#b)",fill:"url(#a)",children:[e.jsx("path",{"data-name":"Path 190",d:"M16.527 8.281c-.853.19-1.64.354-2.421.541a10.837 10.837 0 0 0-2.3.805 4.986 4.986 0 0 0-2.433 2.657 20.131 20.131 0 0 0-1.058 3.935 1.017 1.017 0 0 1-.1.312l-.123-.6a19.932 19.932 0 0 0-.979-3.59A5.108 5.108 0 0 0 4.19 9.408 20.875 20.875 0 0 0 .295 8.37.825.825 0 0 1 0 8.267l.6-.119a19.839 19.839 0 0 0 3.591-.978 5.112 5.112 0 0 0 2.925-2.927A21.881 21.881 0 0 0 8.181.218C8.192.163 8.209.11 8.238 0c.153.72.281 1.384.436 2.042a12.14 12.14 0 0 0 .916 2.7 4.974 4.974 0 0 0 2.61 2.392 19.543 19.543 0 0 0 3.912 1.06c.119.023.237.05.415.087"}),e.jsx("path",{"data-name":"Path 191",d:"M22.543 16.995c-.75.191-1.491.361-2.222.57a3.374 3.374 0 0 0-2.454 2.457c-.2.7-.346 1.406-.517 2.11a.169.169 0 0 1-.054.1c-.073-.353-.129-.711-.224-1.058a16.726 16.726 0 0 0-.5-1.652 3.231 3.231 0 0 0-2.246-1.951c-.651-.192-1.319-.328-1.98-.49a.853.853 0 0 1-.253-.09c.353-.073.711-.128 1.059-.224a16.785 16.785 0 0 0 1.672-.513 3.232 3.232 0 0 0 1.938-2.257c.193-.659.33-1.334.492-2l.049-.2c.19.744.358 1.495.575 2.23a3.224 3.224 0 0 0 1.955 2.242 16.953 16.953 0 0 0 1.652.5c.347.095.7.151 1.06.225"})]})]}),G=({text:t})=>e.jsxs("div",{className:"mb-10 flex w-fit justify-between rounded-xl bg-pink-500 px-4 py-3 md:w-full md:justify-start",children:[e.jsx(F,{className:"mr-5"}),e.jsx("p",{className:"text-sm text-purple-500",children:t})]});function O(){var x,d,m,h,u;const{user:t,signOut:r}=n.useContext(j),{defaultAddress:s}=n.useContext(j),l=M(),[b,i]=n.useState(!1),w=k(),N=S({onSuccess:()=>{localStorage.removeItem("isPvrpleAuthenticated"),window.location.pathname="/",window.location.search=""}});n.useEffect(()=>{t||l("/?auth=signin")},[t,l]);const o=()=>{r(),l("/")},v=async()=>{await w.mutateAsync().then(()=>{N.mutate(),l("/"),f("Successfully deleted your account","success",2)}).catch(()=>{f("There was a problem deleting your account. Please try again.","error",2)}).finally(()=>{i(!1)})},y=()=>{v()},g=e.jsx(e.Fragment,{children:s&&e.jsxs(e.Fragment,{children:[s==null?void 0:s.streetName,e.jsx("br",{}),s==null?void 0:s.apartmentNumber,(s==null?void 0:s.apartmentNumber)!==""&&e.jsx("br",{}),D(s==null?void 0:s.city,s==null?void 0:s.state,s==null?void 0:s.zipCode)]})});return e.jsxs(e.Fragment,{children:[e.jsxs(P,{modalWidth:"400px",shouldShow:b,onClose:()=>{i(!1)},shouldClose:!0,className:"w-[200px] ",textColor:"text-purple-500",children:[e.jsxs("div",{className:"flex flex-col flex-wrap",children:[e.jsx("div",{className:"flex items-center pb-2",children:e.jsx("div",{className:"mr-2 text-xl font-semibold text-purple-500",children:"Delete your account"})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"mt-2 flex flex-row text-sm text-white-700",children:"Deleting your account will permanently erase all your information from our database. This action cannot be reversed."})})]}),e.jsxs("div",{className:"mt-5 flex flex-col flex-wrap justify-between",children:[e.jsx(c,{colorTheme:"red",variant:"filled",onClick:y,children:"Delete"}),e.jsx(c,{colorTheme:"purple",variant:"bare",onClick:()=>{i(!1)},children:"Keep account"})]})]}),t?e.jsxs("div",{className:"ml-60 w-2/3 flex-grow p-10 md:ml-0 md:flex md:h-full md:w-full md:flex-col md:justify-between md:p-0 ",children:[e.jsxs("div",{className:"mb-5 flex justify-between ",children:[e.jsx("h1",{className:"text-4xl font-semibold sm:text-3xl",children:"My Profile"}),e.jsx(c,{className:"max-w-xs md:hidden",colorTheme:"purple",variant:"outline",onClick:o,children:"Sign Out"})]}),t.createdAt&&e.jsx(G,{text:`Member since ${T(new Date(t.createdAt),"MMMM dd, yyyy")}`}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),e.jsx("p",{className:"text-black mb-2 text-sm opacity-50",children:t==null?void 0:t.email})]}),e.jsx("div",{children:e.jsx(p,{to:"/edit",className:"text-sm text-green-500 underline",children:"Edit"})})]}),e.jsx(a,{title:"Shipping address",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-black text-sm",children:g})}),e.jsx("div",{children:e.jsx(p,{to:"/address-book",className:"text-sm text-green-500 underline",children:"Manage"})})]})}),e.jsx(a,{title:"Date of birth",children:e.jsx("p",{className:"text-sm",children:E(t==null?void 0:t.dateOfBirth)})}),e.jsx(a,{title:"Gender",children:e.jsx("p",{className:"text-sm",children:((x=t.gender)==null?void 0:x.value)??"Not specified"})}),e.jsx(a,{title:"Marital status",children:e.jsx("p",{className:"text-sm",children:((d=t.maritalStatus)==null?void 0:d.value)??"Not specified"})}),e.jsx(a,{title:"Ethnicity",children:e.jsx("p",{className:"text-sm",children:((m=t.ethnicity)==null?void 0:m.value)??"Not specified"})}),e.jsx(a,{title:"Education level",children:e.jsx("p",{className:"text-sm",children:((h=t.education)==null?void 0:h.value)??"Not specified"})}),e.jsx(a,{title:"Email notification preference",children:e.jsxs("div",{className:"flex justify-between gap-2 text-sm",children:[e.jsx("div",{children:"Abandoned cart email"}),e.jsx("div",{children:e.jsx(B,{isChecked:((u=t==null?void 0:t.userPreferenceValues)==null?void 0:u.abandonedCartEmail)||!1,onChange:()=>null,disabled:!0})})]})}),e.jsx(a,{title:"Privacy and security",children:e.jsxs("div",{className:"mb-5 flex flex-wrap justify-between",children:[e.jsx("p",{className:"flex max-w-sm flex-wrap text-sm",children:"Deleting your account will permanently erase all your information from our database. This action cannot be reversed."}),e.jsx("button",{onClick:()=>{i(!0)},className:"whitespace-nowrap text-sm text-red-500 underline",children:"Delete your account"})]})}),e.jsx("div",{className:"hidden w-full self-end md:block ",children:e.jsx(c,{className:"max-w-full",colorTheme:"purple",variant:"outline",onClick:o,children:"Sign Out"})})]}):null]})}export{O as default};
