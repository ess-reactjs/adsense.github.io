import{bs as N,bt as t,bI as g,r,b as P,j as e,a_ as v,a$ as y,bB as o,bC as n,m as S,bJ as R,V as C,L as E,bD as q}from"./index-W2AL0DnC.js";const M=N().shape({email:t().email("Invalid email address").required("Required"),code:t().required("Required"),newPassword:t().required("Required").min(8,"Password must be at least 8 characters"),confirmNewPassword:t().oneOf([g("newPassword")],"Passwords must match").required("Required")}),I=()=>{const[c,x]=r.useState(null),[m,l]=r.useState(!1),[u,w]=P(),[d,p]=r.useState(""),[b,h]=r.useState(!1),f=async i=>{try{l(!0),await q.forgotPasswordSubmit(i.email,i.code,i.newPassword),p("Your password has been successfully changed!"),l(!1),setTimeout(()=>{u.set("auth","signin"),w(u)},1e3)}catch(j){x(j.message),l(!1)}},a=()=>"w-full rounded-lg border border-white-500 px-3 py-4 text-sm",s=()=>"mt-1 px-2 text-sm text-red-500";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative pb-4",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold text-purple-500",children:"Reset Password"}),e.jsx("p",{className:" pb-4 pt-4 text-sm",children:"Enter your email and the code you have received by email to change your password."}),e.jsx(v,{initialValues:{email:"",code:"",newPassword:"",confirmNewPassword:""},validationSchema:M,onSubmit:f,children:e.jsxs(y,{autoComplete:"off",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{className:a(),type:"email",name:"email",placeholder:"Email"}),e.jsx(n,{name:"email",component:"div",className:s()})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{type:"text",id:"code",name:"code",className:a(),placeholder:"Code"}),e.jsx(n,{name:"code",component:"div",className:s()})]}),e.jsx(S,{label:R,placement:"top-end",showTooltip:b,children:e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{type:"password",id:"newPassword",name:"newPassword",className:a(),placeholder:"New Password",autoComplete:"new-password",onFocus:()=>h(!0),onBlur:()=>h(!1)}),e.jsx(n,{name:"newPassword",component:"div",className:s()})]})},1),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{className:a(),type:"password",id:"confirmNewPassword",name:"confirmNewPassword",placeholder:"Confirm New Password",autoComplete:"off"}),e.jsx(n,{name:"confirmNewPassword",component:"div",className:s()})]}),c&&e.jsx("div",{className:s(),children:c}),d&&e.jsx("div",{className:"mt-1 px-2 text-sm text-green-500",children:d}),m&&e.jsx("div",{className:"bg-white absolute inset-0 z-50 flex items-center justify-center bg-white-500 bg-opacity-50",children:e.jsx(C,{size:40})}),e.jsx("button",{className:"my-4 w-full rounded-lg bg-purple-500 py-4 text-sm font-bold text-white-500 hover:bg-purple-600",type:"submit",disabled:m||d.length>0,children:"Change Password"})]})}),e.jsx("div",{className:" flex w-full justify-center text-sm",children:e.jsx(E,{to:"?auth=signin",children:e.jsx("button",{className:" font-bold text-green-500 underline hover:text-green-600",children:"Back to Sign in"})})})]})})};export{I as default};
