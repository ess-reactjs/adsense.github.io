import{q as U,l as K,p as Qe,s as ae,j as e,o as S,B as L,m as J,O as Ue,t as Q,ae as He,L as q,v as oe,w as Z,y as We,x as Ie,af as Ge,r as o,f as ne,e as I,ag as Je,ah as Ve,ai as $,A as Ye,E as Ee,H as z,K as Te,M as Ke,aj as X,u as Me,V as Le,ak as Ze,D as ze,al as Be,am as De,an as Re,ao as Pe,ap as qe,aq as me,ar as xe,as as Xe,a9 as P,U as Y,at as _e,au as ue,av as he,aw as $e,ax as es,a6 as ee,T as ss,a1 as ts,a2 as as,Y as ie,b as ce,ay as ls,az as rs,aA as os,aB as ns,a4 as pe,a7 as fe,a8 as ge,a5 as Oe,aC as is,aD as cs,aE as ds,aF as ms,$ as xs,aG as us}from"./index-W2AL0DnC.js";import{u as le}from"./use-loading-progress-B3ewIWgk.js";import{S as hs}from"./index--PJE-aH-.js";import{M as se,a as ps,S as fs}from"./slick-M9OtyDn-.js";import{c as gs,B as ws,C as G,a as js}from"./carts-Cqi7XGvI.js";import{B as _}from"./index-S1YyA5q5.js";import{S as Cs}from"./index-DIHeX8hj.js";import"./MembershipAPI-D2n6KU8D.js";const vs="/assets/smart-move-tour-DdwCJhEE.gif",bs=({closePanel:s})=>{const{applySelectedSmartSuggestions:t,currentConfig:a,handleStatusChange:l,status:r,currentSuggestions:n,setConfigDetails:c}=U(),{refetchCarts:x,carts:m}=K(),{mutateAsync:h,isLoading:w}=Qe(),{refetch:p}=ae(!1,!1),{setPercent:f,setIsStarted:i}=le(),u=()=>{f(0),i(!0),setTimeout(()=>{},1e4);try{h(a??{storeConfig:[]}).then(d=>{d.data.isJobInitiated?(l(d.data.createdJob.status),c(d.data.createdJob)):(Q("Something went wrong. Please try again","error",3),i(!1))}).catch(()=>{i(!1),Q("Something went wrong. Please try again","error",3)}).finally(()=>{p(),x()})}catch{i(!1),Q("Something went wrong. Please try again","error",3)}};return e.jsxs(e.Fragment,{children:[r!==S.success&&e.jsxs("div",{className:"black_1vtdw_1 mx-auto mb-8 mt-8 flex w-10/12 justify-center gap-4 md:mt-10 sm:w-full",children:[e.jsx(L,{variant:"outline",onClick:s,children:"Back To Cart"}),e.jsx(J,{label:Ue,showTooltip:m.length<=0,children:e.jsx(L,{colorTheme:"purple",variant:"filled",onClick:u,disabled:m.length<=0||w,"aria-disabled":m.length<=0||w,loading:w,children:"Calculate"})})]}),r===S.success&&m.length>0&&e.jsxs("div",{className:"mx-auto mb-8 mt-8 flex w-10/12 justify-center gap-4 md:mt-10 sm:w-full",children:[e.jsx(L,{variant:"outline",onClick:u,disabled:m.length<=0||w,"aria-disabled":m.length<=0||w,loading:w,children:"Calculate Again"}),e.jsx(L,{colorTheme:"purple",variant:"filled",onClick:async()=>{await t(),s(),x()},disabled:!n||Object.keys(n).length<=0,"aria-disabled":!n||Object.keys(n).length<=0,children:"Apply"})]})]})},Ns="data:image/png;base64,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",we=({svgIcon:s,text:t})=>e.jsxs("div",{className:"savings_chip px-4 py-2",children:[e.jsx("img",{src:s,alt:"svg-icon"}),e.jsx("span",{children:t})]}),As=({type:s="horizontal",customIcon:t})=>e.jsx(e.Fragment,{children:s=="vertical"&&e.jsx("div",{className:" h-full w-fit text-black-500 opacity-100 md:mx-auto",children:e.jsx("div",{className:"z-2 relative flex h-full flex-col items-center text-black-200",children:e.jsx("div",{className:"flex h-[40px] w-[40px] items-center justify-center rounded-[50%] bg-[#DCDFE0]  p-0    text-center md:rotate-90 sm:h-[30px] sm:w-[30px]",children:t??e.jsx(He,{size:30,className:"text-black-900 "})})})})}),je=({logoStore:s,product:t,id:a})=>e.jsx(q,{to:oe.product_detail(encodeURIComponent(a)),className:"hover:cursor-pointer",children:e.jsxs("div",{className:"productCart flex h-auto items-start gap-5",children:[e.jsx("div",{className:"w-1/3 self-center",children:e.jsx("img",{src:t.thumbnail,className:"m-auto h-24 w-24 rounded-md object-contain md:h-14",alt:`Product thumbnail for ${Z(t.name)}`})}),e.jsxs("div",{className:"flex w-full flex-col content-start items-start justify-start",children:[e.jsx("p",{className:"text-md mb-2 w-auto overflow-ellipsis whitespace-pre-wrap text-left  hover:overflow-visible",title:Z(t.name),children:Z(We(t.name,100))}),e.jsxs("p",{className:"fw-500 text-lg font-semibold",children:["$",t.price.amount]}),e.jsx("div",{className:"mt-8 w-24 sm:mt-5 sm:w-16",children:e.jsx(Ie,{store:s})})]})]})}),ks=({actions:s})=>e.jsx("div",{className:"mb-5 h-full w-full rounded-md  md:w-fit",children:s.map(t=>e.jsxs("div",{className:"savingCenterLine relative mb-4 flex items-center justify-between md:block ",children:[e.jsx("div",{className:"w-[35%] flex-shrink-0 md:mb-2 md:w-[100%]",children:e.jsx(je,{logoStore:t.sourceProduct.store,product:t.sourceProduct,id:t.sourceProductId})}),e.jsx(As,{type:"vertical"}),e.jsx("div",{className:"w-[35%] flex-shrink-0 md:mt-2 md:w-[100%] ",children:e.jsx(je,{logoStore:t.targetProductToAdd.store,product:t.targetProductToAdd,id:t.targetProductId})})]},t.sourceProductId))}),Ss="_radio_vuote_1",ys={radio:Ss},Is=({title:s,content:t,titleStyle:a,id:l,isRadioButton:r,onRadioChange:n,isChecked:c,targetCart:x,style:m,defaultExpanded:h=!1,collapseExpandIconColor:w})=>{const{over:p}=Ge({id:l}),[f,i]=o.useState(!1),[u,d]=o.useState(h),C=ne("(max-width: 639px)");o.useEffect(()=>{p&&d(()=>p!=null&&p.id?(p==null?void 0:p.id)===l||x===l:!1)},[p,p==null?void 0:p.id,x,l]);const g=()=>{d(y=>!y)},v=()=>{N(),d(!0),i(!1)},N=()=>{r&&n(l)};return e.jsxs("div",{className:"accordion accordionsaving",children:[e.jsxs("div",{className:I("accordion-header relative flex cursor-pointer items-center justify-between p-5 py-6 transition-all	duration-75 sm:p-3",{" bg-white text-purple-500":m=="purple"&&u,"rounded-lg bg-white-100 text-purple-500 ":m=="purple"&&!u}),onClick:g,children:[r&&e.jsxs("div",{className:"flex items-center sm:items-start",children:[e.jsxs("div",{onClick:y=>{y.stopPropagation()},className:I(ys.radio,"inline-block sm:mt-2"),children:[e.jsx("input",{className:"hover:cursor-pointer",name:"radio",type:"radio",id:l==null?void 0:l.toString(),hidden:!0,value:l,onChange:y=>{y.stopPropagation(),N()},checked:c}),e.jsx("label",{htmlFor:l==null?void 0:l.toString(),className:"mr-5 flex h-5 w-5 items-center justify-center rounded-full px-2 py-1 text-xl font-bold transition-all hover:cursor-pointer"})]}),e.jsx("div",{className:a,children:s})]}),!r&&s,e.jsx("div",{className:"flex",children:u?e.jsx(Je,{color:w??"",className:I("ml-3 h-5 w-5 ",{"text-white-100":m=="purple"&&u,"text-white-700":m!="purple"})}):e.jsx(Ve,{color:w??"",className:I("ml-3 h-5 w-5 ",{"text-white-100":m=="purple","text-white-700":m!="purple"||m=="purple"&&!u})})})]}),u&&e.jsx("div",{className:I("accordion-body membersip__accordion relative rounded-b-lg  p-5 sm:p-0 sm:py-3",{"bg-white":m=="purple"}),children:t}),e.jsx(e.Fragment,{children:f&&e.jsxs($,{onClose:()=>{i(!1)},modalWidth:C?"100%":"60%",title:s,textColor:"text-purple-500",className:"bg-purple-100",titleBgColor:"bg-purple-100",showCloseBtn:!0,shouldShow:!0,shouldClose:!0,children:[e.jsx("div",{className:"relative flex flex-col flex-wrap overflow-auto",children:e.jsx("div",{className:"pt-4",children:e.jsx("div",{children:t})})}),e.jsx(L,{onClick:v,children:"Select"})]})})]})},Es="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_3688_11429)'%3e%3cpath%20d='M6.24984%206.66699C6.47996%206.66699%206.6665%206.48044%206.6665%206.25033C6.6665%206.02021%206.47996%205.83366%206.24984%205.83366C6.01972%205.83366%205.83317%206.02021%205.83317%206.25033C5.83317%206.48044%206.01972%206.66699%206.24984%206.66699Z'%20fill='%232DB089'/%3e%3cpath%20d='M10.4882%202.15533C10.1757%201.84274%209.75183%201.66709%209.30984%201.66699H3.33317C2.89114%201.66699%202.46722%201.84259%202.15466%202.15515C1.8421%202.46771%201.6665%202.89163%201.6665%203.33366V9.31033C1.6666%209.75232%201.84225%2010.1762%202.15484%2010.4887L9.40817%2017.742C9.78693%2018.1184%2010.2992%2018.3296%2010.8332%2018.3296C11.3671%2018.3296%2011.8794%2018.1184%2012.2582%2017.742L17.7415%2012.2587C18.1179%2011.8799%2018.3291%2011.3676%2018.3291%2010.8337C18.3291%2010.2997%2018.1179%209.78742%2017.7415%209.40866L10.4882%202.15533Z'%20stroke='%232DB089'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.24984%206.66699C6.47996%206.66699%206.6665%206.48044%206.6665%206.25033C6.6665%206.02021%206.47996%205.83366%206.24984%205.83366C6.01972%205.83366%205.83317%206.02021%205.83317%206.25033C5.83317%206.48044%206.01972%206.66699%206.24984%206.66699Z'%20stroke='%232DB089'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_3688_11429'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Ts="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='lucide/truck'%3e%3cpath%20id='Vector'%20d='M14%2018V6C14%205.46957%2013.7893%204.96086%2013.4142%204.58579C13.0391%204.21071%2012.5304%204%2012%204H4C3.46957%204%202.96086%204.21071%202.58579%204.58579C2.21071%204.96086%202%205.46957%202%206V17C2%2017.2652%202.10536%2017.5196%202.29289%2017.7071C2.48043%2017.8946%202.73478%2018%203%2018H5M5%2018C5%2019.1046%205.89543%2020%207%2020C8.10457%2020%209%2019.1046%209%2018M5%2018C5%2016.8954%205.89543%2016%207%2016C8.10457%2016%209%2016.8954%209%2018M15%2018H9M15%2018C15%2019.1046%2015.8954%2020%2017%2020C18.1046%2020%2019%2019.1046%2019%2018M15%2018C15%2016.8954%2015.8954%2016%2017%2016C18.1046%2016%2019%2016.8954%2019%2018M19%2018H21C21.2652%2018%2021.5196%2017.8946%2021.7071%2017.7071C21.8946%2017.5196%2022%2017.2652%2022%2017V13.35C21.9996%2013.1231%2021.922%2012.903%2021.78%2012.726L18.3%208.376C18.2065%208.25888%2018.0878%208.16428%2017.9528%208.0992C17.8178%208.03412%2017.6699%208.00021%2017.52%208H14'%20stroke='%232DB089'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Ms="data:image/png;base64,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",te=({image:s,title:t,text:a,imageWidth:l=67,imageHeight:r=67,action:n})=>e.jsxs(e.Fragment,{children:[e.jsx("img",{src:s,height:r,width:l,className:"mx-auto my-10 sm:my-5 sm:w-10"}),e.jsx("h4",{className:"fw-600 text-3xl sm:text-lg",children:t}),e.jsx("p",{className:"fw-400 gray_color text-md mt-4 px-20 sm:mt-0 sm:px-0",children:a}),e.jsx("div",{className:"mt-auto h-full p-5 md:p-10",children:e.jsx("div",{className:"mx-[100px] flex h-[90%] flex-col items-center justify-center sm:mx-0",children:n})})]}),Ls=()=>{const{data:s,isLoading:t,isFetching:a}=Ye(),[l,r]=o.useState({}),[n,c]=o.useState(),{setCurrentSuggestions:x}=U(),{handleLocalState:m,stateResponse:h}=Ee("selectionChangedAlert"),[w,p]=o.useState(!0),[f,i]=o.useState(!1),{setIsStarted:u}=le(),d=o.useCallback(g=>{const v={};g.groups&&g.groups.forEach(y=>{const B={};y.suggestions.forEach(D=>{B[D.id]=!0}),v[y.id]=B}),r(v);const N=Object.keys(v)[0];c(N),x(v[N]||{})},[x]);o.useEffect(()=>{s&&(u(!1),d(s.data))},[s,d]);//! this feature will not be part of the first release
const C=g=>{c(g),x(l[g]||{}),w&&h!=z.ACCEPTED&&(i(!0),p(!1))};return a||t||!s||!s.data||!s.data.groups?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[f&&e.jsxs(se,{modalWidth:"35%",showCloseBtn:!1,shouldShow:f,onClose:()=>{m(z.DISMISSED),i(!1)},shouldClose:!0,className:"w-[200px] p-12 text-center",textColor:"text-purple-500",children:[e.jsx("div",{className:"p-4 md:p-4",children:e.jsx("p",{className:"fw-400 gray_color mb-10 mt-4 w-5/12 w-full text-left text-lg md:mt-0",children:"Choose one suggestion at a time and recalculate for more savings."})}),e.jsxs("div",{className:"mx-auto flex w-full flex-row items-center gap-5 self-center p-4 md:p-4 sm:w-full sm:p-0",children:[e.jsx("div",{className:" w-1/2 ",children:e.jsx(L,{className:" w-full ",variant:"filled",colorTheme:"purple",type:"button",onClick:()=>{m(z.ACCEPTED),i(!1)},children:"Don't Show Again"})}),e.jsx("div",{className:"w-1/2",children:e.jsx(L,{className:"w-full",variant:"outline",colorTheme:"purple",type:"button",onClick:()=>{m(z.DISMISSED),i(!1)},children:"Close"})})]})]}),(s==null?void 0:s.data.groups.length)<1?e.jsx(te,{image:Ms,title:"No suggestions available",text:""}):e.jsxs("div",{className:"p-14 md:p-5",children:[e.jsx("h4",{className:"fw-600 text-left text-3xl md:text-lg",children:"Smart Saving Suggestions"}),e.jsx("p",{className:"fw-400 gray_color mb-10 mt-4 text-left text-lg lg:w-full md:mt-0",children:"Boost your cart with smart savings! Pick your favorite saving suggestion from the list below and click “Apply” to see the magic happen."}),s&&!t&&(s==null?void 0:s.data.groups.map(g=>e.jsx(Is,{isEnlargeable:!0,collapseExpandIconColor:"#767879",content:e.jsx("div",{className:"w-full overflow-auto ",children:g.suggestions.map(v=>e.jsx(ks,{totalSaved:v.savings,actions:v.actions},v.id))},g.id),style:"purple",onRadioChange:C,isRadioButton:!0,id:g.id,isChecked:g.id===n,title:e.jsxs("div",{className:"flex flex-wrap items-center gap-5 sm:block sm:w-max sm:gap-1",children:[e.jsxs("span",{className:"fw-600 flex pl-4 text-2xl md:text-lg",children:["Save ",g.totalSavings.total.displayValue]}),e.jsx("div",{className:"flex gap-3",children:g.totalSavings.perCriteria.map((v,N)=>e.jsxs("div",{className:"tooltip__price_main relative flex flex-wrap items-start",children:[e.jsx("p",{className:"tooltip__price fw-400",children:v.savingType}),v.savingType.toLowerCase()==="item price"?e.jsx(we,{svgIcon:Es,text:` $${v.amount}`}):e.jsx(we,{svgIcon:Ts,text:` $${v.amount}`})]},N))})]}),titleStyle:"font-semibold text-lg sm:block",className:"mb-5"},g.id)))]})]})},Bs=({label:s,label_line2:t,isCompleted:a,showResults:l,duration:r,labelStyles:n,useContextValues:c})=>{const{percent:x,setPercent:m}=le(),[h,w]=o.useState(0),[p,f]=o.useState(!0),i=c?x:h,u=c?m:w;return o.useEffect(()=>{if(!a&&!c){const d=80-i,C=r*(d/80),g=d/C,v=setInterval(()=>{i<80&&u(N=>{const y=Math.min(N+g,80);return y>=80&&clearInterval(v),y})},1e3);return()=>{clearInterval(v)}}},[c,a,i,r,u]),o.useEffect(()=>{a&&(u(100),setTimeout(()=>{f(!1)},1e3))},[a,u]),o.useEffect(()=>{!p&&a&&l()},[p,a,l]),p?e.jsx("div",{className:"w-full ",children:e.jsxs("div",{className:" flex flex-col items-center justify-center text-center text-sm text-black-400 ",children:[e.jsx("div",{className:"mb-1 h-2 w-full max-w-80 rounded-full bg-white-400 opacity-0",children:e.jsx("div",{className:"h-2 rounded-full",style:{background:"linear-gradient(to right, #461256, #62096c)",width:`${i}%`,transition:"width 0.5s ease"}})}),e.jsxs("span",{className:I("text-black-400",n),children:[s,t&&e.jsx("br",{}),t&&t]})]})}):null},Fe="/assets/loader_v2-DxnhWpaJ.gif",Ds=()=>{var h;const[s,t]=o.useState(!1),{data:a,refetch:l}=ae(!1,!1),{handleStatusChange:r}=U(),{LOADING_BAR_CONFIG:n}=Te(),{mutateAsync:c}=Ke(),{setIsStarted:x}=le(),m=()=>{c().then(()=>{l(),r((a==null?void 0:a.data.status)??S.new),Q("Calculation has been stopped","success",2),x(!1)}).catch(()=>{Q("Something went wrong. Please try again","error",3)})};return e.jsxs(e.Fragment,{children:[s&&e.jsx(X,{message:"Are you sure you want to cancel the calculation to get the smart suggestions?",title:"Cancel Calculation",type:"action",cancelBtnText:"No",confirmBtnText:"Yes",confirm:()=>{m(),t(!1)},dismiss:()=>{t(!1)}}),e.jsxs("div",{className:"p-14 md:p-5",children:[e.jsx("h4",{className:"fw-600 mb-10 border-b pb-8 text-left text-3xl ",style:{borderColor:"#D9D9D9"},children:"Smart Savings Suggestions"}),e.jsxs("div",{className:"calculate_progressbar",children:[e.jsx("img",{src:Fe,alt:"loader",className:"mx-auto w-44"}),e.jsx(Bs,{useContextValues:!0,duration:n.SMART_SHOPPING_LOADING_DURATION,label:"Hang tight! We're optimizing your shopping carts.",label_line2:"Your Smart Savings will be ready in a few minutes.",labelStyles:"text-xs",isCompleted:((h=a==null?void 0:a.data)==null?void 0:h.status)==S.success,showResults:()=>{}})]}),e.jsx("div",{className:"m-auto mt-5 w-48",children:e.jsx(L,{colorTheme:"purple",variant:"outline",onClick:()=>t(!0),children:"Cancel Calculation"})})]})]})},Rs="data:image/svg+xml,%3csvg%20width='67'%20height='67'%20viewBox='0%200%2067%2067'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3crect%20width='67'%20height='67'%20fill='url(%23pattern0_3660_2195)'/%3e%3cdefs%3e%3cpattern%20id='pattern0_3660_2195'%20patternContentUnits='objectBoundingBox'%20width='1'%20height='1'%3e%3cuse%20xlink:href='%23image0_3660_2195'%20transform='scale(0.0078125)'/%3e%3c/pattern%3e%3cimage%20id='image0_3660_2195'%20width='128'%20height='128'%20xlink:href='data:image/png;base64,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'/%3e%3c/defs%3e%3c/svg%3e",Ps=()=>e.jsx(te,{image:gs,text:"To get helpful tips on saving, just add items to your cart!",title:"No items found",action:e.jsx("div",{className:"mt-5 w-fit sm:w-full",children:e.jsx(q,{to:"/",children:e.jsx(L,{colorTheme:"purple",variant:"filled",className:"p-4 px-6",children:"Browse Products"})})})},1),Os=()=>{const{status:s=S.new}=U(),{user:t}=Me(),{carts:a}=K(),{refetch:l,isLoading:r}=ae(!1,!1),[n,c]=o.useState(s);if(o.useEffect(()=>{var h;t!=null&&t.id&&!((h=t==null?void 0:t.subscription)!=null&&h.isFreePlan)&&l().then(w=>{var p,f;c(((f=(p=w==null?void 0:w.data)==null?void 0:p.data)==null?void 0:f.status)??s)})},[s]),r)return e.jsx(Le,{size:45});if((a==null?void 0:a.length)<1)return e.jsx(Ps,{});const x=e.jsx(te,{image:Rs,title:"No Suggestions Yet",text:"Enhance your savings potential by resetting your membership details. When ready, click “Calculate” to proceed."}),m={[S.new]:x,[S.failed]:x,[S.killed]:x,[S.cancel]:x,[S.applied]:x,[S.toggled]:x,[S.pending]:e.jsx("div",{children:e.jsx(Ds,{})}),[S.success]:e.jsx(Ls,{}),[S.expired]:e.jsx(te,{image:Ns,title:"Your suggestions are outdated.",text:"Your carts have changed since the last time we checked. Try calculating again for the latest suggestions."})};return e.jsx("div",{className:"h-full w-full self-center",children:m[n]})},Fs="data:image/png;base64,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",Qs=({id:s,handleSettingsClicked:t})=>e.jsxs("div",{id:s,onClick:t,className:"smart_saving mt-4 rounded-xl border p-4 md:mb-5 md:w-4/12 md:py-10 sm:mt-0 sm:w-4/12 sm:p-2 sm:py-4 sm:text-center",children:[e.jsxs("h4",{className:"flex items-center text-xl text-purple-100 md:block md:text-center sm:block sm:text-xs",children:[e.jsx("img",{src:Fs,width:30,className:"mb:mb-2 mr-3 h-7 w-auto  md:mx-auto md:mb-5 md:h-6 sm:mb-3 sm:h-6",alt:"Smart Savings"}),e.jsx("span",{className:"md:block md:pt-2.5 sm:pt-2.5",children:"Smart Savings"})]}),e.jsx("p",{className:"text-md mt-3 text-purple-100 md:hidden sm:text-xs",children:"Analyze your carts, compare prices across all available stores, and search for deals you may have missed."}),e.jsxs("button",{onClick:t,className:"text-md border-gray-100 mt-8 flex w-full items-center justify-center rounded-xl border bg-purple-100 p-4 md:hidden sm:text-sm",children:[e.jsx("img",{src:Ze,width:20,className:"mr-3 sm:hidden",alt:"Smart Savings Button"})," ","Smart Savings"]})]}),Ce="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.3334%2017.3333L30.6187%2022.7493L26.6547%2023.8827L29.4881%2028.7907L27.1787%2030.124L24.3454%2025.2173L21.3814%2028.084L21.3334%2017.3333ZM18.6667%207.99999H21.3334V10.6667H28.0001C28.3537%2010.6667%2028.6929%2010.8071%2028.9429%2011.0572C29.1929%2011.3072%2029.3334%2011.6464%2029.3334%2012V17.3333H26.6667V13.3333H13.3334V26.6667H18.6667V29.3333H12.0001C11.6465%2029.3333%2011.3073%2029.1928%2011.0573%2028.9428C10.8072%2028.6928%2010.6667%2028.3536%2010.6667%2028V21.3333H8.00008V18.6667H10.6667V12C10.6667%2011.6464%2010.8072%2011.3072%2011.0573%2011.0572C11.3073%2010.8071%2011.6465%2010.6667%2012.0001%2010.6667H18.6667V7.99999ZM5.33341%2018.6667V21.3333H2.66675V18.6667H5.33341ZM5.33341%2013.3333V16H2.66675V13.3333H5.33341ZM5.33341%207.99999V10.6667H2.66675V7.99999H5.33341ZM5.33341%202.66666V5.33332H2.66675V2.66666H5.33341ZM10.6667%202.66666V5.33332H8.00008V2.66666H10.6667ZM16.0001%202.66666V5.33332H13.3334V2.66666H16.0001ZM21.3334%202.66666V5.33332H18.6667V2.66666H21.3334Z'%20fill='%23333333'/%3e%3c/svg%3e",Us="data:image/svg+xml,%3csvg%20width='28'%20height='21'%20viewBox='0%200%2028%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19.2%207.92857H21.8M19.2%2013.0714H21.8M6.421%2014.3571C6.68898%2013.6037%207.18683%2012.9512%207.84582%2012.4895C8.50482%2012.0279%209.29245%2011.78%2010.1%2011.78C10.9075%2011.78%2011.6952%2012.0279%2012.3542%2012.4895C13.0132%2012.9512%2013.511%2013.6037%2013.779%2014.3571M12.7%209.21429C12.7%2010.6344%2011.5359%2011.7857%2010.1%2011.7857C8.66406%2011.7857%207.5%2010.6344%207.5%209.21429C7.5%207.79412%208.66406%206.64286%2010.1%206.64286C11.5359%206.64286%2012.7%207.79412%2012.7%209.21429ZM3.6%201.5H24.4C25.8359%201.5%2027%202.65127%2027%204.07143V16.9286C27%2018.3487%2025.8359%2019.5%2024.4%2019.5H3.6C2.16406%2019.5%201%2018.3487%201%2016.9286V4.07143C1%202.65127%202.16406%201.5%203.6%201.5Z'%20stroke='%23070707'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Hs=({status:s,handleSettingsClicked:t})=>{const[a,l]=o.useState(!1),[r,n]=o.useState(!1),c=ne("(max-width: 1023px)");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"smart_move rounded-xl border p-4 md:mb-5 md:mt-4 md:w-4/12 md:py-10 sm:mt-0 sm:w-4/12 sm:p-2 sm:py-4 sm:text-center",onClick:()=>{c&&n(!0)},children:[e.jsxs("h4",{className:"flex items-center text-xl md:block md:text-center sm:block sm:text-sm",children:[e.jsx("img",{src:Ce,className:"mb:mb-2 mr-3 w-auto md:mx-auto md:mb-5 md:h-8 sm:mb-3 sm:h-8",alt:"Smart Move"}),"Smart Move"]}),e.jsx("p",{className:"text-md mt-3 md:hidden sm:text-xs",children:"Move items between carts to find better deals."})]}),e.jsxs("div",{className:"smart_membership mt-4 rounded-xl border p-4 md:mb-5 md:w-4/12 md:py-10 sm:mt-0 sm:w-4/12 sm:p-2 sm:py-4 sm:text-center",onClick:()=>{l(!0)},children:[e.jsxs("h4",{className:"flex items-center text-xl md:block md:text-center sm:block sm:text-sm",children:[e.jsx("img",{src:Us,className:"mb:mb-2 mr-3 h-6 w-auto md:mx-auto md:mb-5 md:h-6 sm:mb-3 sm:h-6",alt:"Store Memberships"}),e.jsx("span",{className:"block md:hidden",children:"Store Memberships"}),e.jsx("span",{className:"hidden md:block md:pt-2 sm:pt-2",children:" Memberships"})]}),e.jsx("p",{className:"text-md gray_color mt-3 md:hidden sm:text-xs",children:"Personalize your savings by updating your store membership."}),e.jsx("button",{onClick:()=>l(!0),className:"text-md border-gray-500 gray_color fw-500 mt-8 w-full rounded-xl border bg-white-100 p-4 md:hidden sm:text-sm",children:"View All"})]}),e.jsx(Qs,{id:"suggestionButton",status:s??S.new,handleSettingsClicked:t}),e.jsx($,{modalWidth:"90%",showCloseBtn:!0,shouldShow:a,onClose:()=>l(!1),shouldClose:!0,className:"store-memberships w-[90%] p-6 text-center ",textColor:"text-purple-500",children:e.jsxs("div",{className:"px-6 sm:px-0",children:[e.jsx("h4",{className:"fw-600 text-left text-2xl md:text-3xl",children:"Store Memberships"}),e.jsx("p",{className:"fw-400 gray_color mt-4 w-full text-left text-base md:w-10/12 md:text-lg",children:"Enter your store memberships to receive personalized smart savings suggestions."}),e.jsx("div",{className:"mt-8 md:mt-10",children:e.jsx(hs,{displayType:ze.collapsable,automaticallyUpdate:!1})})]})}),e.jsx($,{modalWidth:"35%",shouldShow:r,onClose:()=>n(!1),shouldClose:!0,className:"w-[200px] text-center",textColor:"text-purple-500",children:e.jsx(ps,{image:Ce,imageWidth:40,imageHeight:40,title:"Smart Move",text:"Move items between carts to find better deals.",action:e.jsx("div",{className:"w-full",children:e.jsx(_,{colorTheme:"purple",variant:"outline",className:"w-full p-4 px-6",onClick:()=>n(!1),children:"Back to Cart"})})})})]})},ve=({cart:s,isActiveTab:t,cartQuantity:a,handleTabClick:l,isSliderView:r=!1})=>{let n=r?"h-14 rounded-lg py-4 text-lg font-medium xl:py-3 lg:px-5 lg:py-3 md:py-3 ":"h-14 rounded-lg px-5 py-3 text-lg font-medium sm:px-3 sm:py-3 ";return n+=t?" active_storetab gray_color border border-purple-500":" text-gray-500 border",e.jsx("button",{className:n,onClick:l,style:{marginLeft:r?"50px":""},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:Be,alt:s.storeName,className:"h-7 pt-2"}),e.jsxs("span",{className:"fw-400 gray_color text-sm tracking-wider",children:["(",a,")"]})]})},s.id)},be=({cart:s,isActiveTab:t,cartQuantity:a,handleTabClick:l,isSliderView:r=!1})=>{let n=r?"h-14 rounded-lg py-3 text-lg font-medium lg:px-5 ":"h-14 rounded-lg px-5 py-3 text-lg font-medium sm:px-3 sm:py-3 ";return n+=t?" active_storetab gray_color border border-purple-500":" text-gray-500 border",e.jsx("button",{className:n,onClick:l,style:{marginLeft:r?"50px":""},children:e.jsxs("div",{className:"flex items-center gap-1 pt-0",children:[e.jsx("img",{src:De,alt:s.storeName,className:"h-7"}),e.jsxs("span",{className:"fw-400 gray_color text-sm tracking-wider",children:["(",a,")"]})]})},s.id)},Ne=({cart:s,isActiveTab:t,cartQuantity:a,handleTabClick:l,isSliderView:r=!1})=>{let n=r?"h-14 rounded-lg py-3 text-lg font-medium lg:px-5 ":"h-14 rounded-lg px-5 py-3 text-lg font-medium sm:px-3 sm:py-3 ";return n+=t?" active_storetab gray_color border border-purple-500":" text-gray-500 border",e.jsx("button",{className:n,onClick:l,style:{marginLeft:r?"50px":""},children:e.jsxs("div",{className:"flex items-center gap-1 pt-1",children:[e.jsx("img",{src:Re,alt:s.storeName,className:"h-5"}),e.jsxs("span",{className:"fw-400 gray_color text-sm tracking-wider",children:["(",a,")"]})]})},s.id)},Ae=({cart:s,isActiveTab:t,cartQuantity:a,handleTabClick:l,isSliderView:r=!1})=>{let n=r?"walmart-tab h-14 rounded-lg py-3 text-lg font-medium lg:px-5 ":"h-14 rounded-lg px-5 py-3 text-lg font-medium sm:px-3 sm:py-3 ";return n+=t?" active_storetab gray_color border border-purple-500":" text-gray-500 border",e.jsx("button",{className:n,onClick:l,style:{marginLeft:r?"50px":""},children:e.jsxs("div",{className:"flex items-center gap-1 pt-1",children:[e.jsx("img",{src:Pe,alt:s.storeName,className:"h-5"}),e.jsxs("span",{className:"fw-400 gray_color text-sm tracking-wider",children:["(",a,")"]})]})},s.id)},Ws="data:image/svg+xml,%3csvg%20width='38'%20height='38'%20viewBox='0%200%2038%2038'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='38'%20height='38'%20rx='19'%20fill='%23461256'/%3e%3cpath%20d='M12%2019H26M26%2019L19%2012M26%2019L19%2026'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Gs=()=>e.jsxs("div",{className:"pt-5 text-center",children:[e.jsx("img",{src:Fe,alt:"Loading...",className:"mx-auto mb-1 w-20"}),e.jsx("p",{className:"text-sm",children:"Fetching similar products"})]}),ke=({productImg:s,productlogo:t,description:a,price:l})=>e.jsxs("div",{className:"similar_product_card relative flex items-start gap-3 rounded-xl",children:[e.jsx("img",{src:s,alt:"",className:"mb-2 h-full max-h-[100px] w-4/12 touch-none object-contain pr-3 sm:w-2/12 sm:pr-0"}),e.jsxs("div",{className:"w-8/12 sm:w-10/12",children:[e.jsx("p",{className:"text-md fw-400",children:((a==null?void 0:a.length)??0)>100?`${a==null?void 0:a.slice(0,80)}...`:a}),e.jsxs("p",{className:"fw-500 mt-2 text-xl ",children:["$",l]}),t&&e.jsx("div",{className:"mt-4 w-20",children:e.jsx(Ie,{store:t})})]})]}),Js="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='%2362096C'/%3e%3cpath%20d='M29%2014L33%2018M33%2018L29%2022M33%2018H19C17.9391%2018%2016.9217%2018.4214%2016.1716%2019.1716C15.4214%2019.9217%2015%2020.9391%2015%2022V23M19%2034L15%2030M15%2030L19%2026M15%2030H29C30.0609%2030%2031.0783%2029.5786%2031.8284%2028.8284C32.5786%2028.0783%2033%2027.0609%2033%2026V25'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Vs=({title:s,price:t,store:a,setShowSimilarProducts:l,image:r,reviewsSummary:n,disCount:c})=>e.jsxs("div",{className:"similar_product_card relative rounded-xl pb-8",children:[e.jsx("button",{className:"replace-btn cursor-pointer",onClick:()=>l(!1),children:e.jsx("img",{src:Js,alt:"",className:"mb-2 w-10  touch-none object-contain "})}),e.jsx("img",{src:r,alt:"",className:"mb-2 h-full max-h-[130px] w-2/6 touch-none object-contain"}),e.jsx("span",{className:"mb-3 text-xs uppercase",children:a}),e.jsxs("div",{className:"ProductItemTitleMain relative",children:[e.jsx("p",{className:"ProductItemTitle fw-500    line-clamp-2 break-before-all whitespace-normal",children:Z(s)}),e.jsx("div",{className:"custom-tooltip",children:Z(s)})]}),e.jsx("p",{className:"ProductItems__star",children:n!=null&&n.rating?e.jsx(qe,{rating:n==null?void 0:n.rating,reviewersCount:n==null?void 0:n.reviewersCount}):""}),e.jsxs("div",{className:`text-md flex-start ProductItems__pricearea flex items-end 
              ${c?"discounted":""}`,children:[e.jsx("div",{className:"fw-500 ProductItems__price",children:me(xe(t.split(" ")[0]))}),e.jsx("div",{className:"priceBefore px-1 line-through",children:c?me(xe(c.split(" ")[0])):null})]})]}),Ys=({isOpen:s,item:t,onClose:a,targetCart:l,activeCartId:r})=>{var H,O,F,R,k;const{carts:n,moveProduct:c}=K(),[x,m]=o.useState(!0),[h,w]=o.useState({}),[p,f]=o.useState(!1),[i,u]=o.useState(void 0),{data:d,isLoading:C}=Xe(`${t.productId}`,[l.toLocaleLowerCase()]),g=b=>{w(b),m(!1)},v=()=>{a(),m(!1),w({}),f(!1),u(void 0)},N={amazon:Be,target:Re,kroger:De,walmart:Pe},y=()=>{if(!t.id)return null;if(t.productLink)switch(!0){case t.productLink.includes("amazon"):return N.amazon;case t.productLink.includes("target"):return N.target;case t.productLink.includes("kroger"):return N.kroger;case t.productLink.includes("walmart"):return N.walmart;default:return null}return null};o.useEffect(()=>{if(!n||n.length===0)console.error("cartContext not loaded");else{const b=n.find(E=>E.storeName.trim().toLocaleLowerCase()===l.trim().toLocaleLowerCase());u(b)}},[n,l]);const B=()=>{f(!0),c(t.id,r,h==null?void 0:h.id,(i==null?void 0:i.id)??"").then(b=>{b?P.success("The product is successfully moved",{toastId:2,type:"success"}):P.error("Error moving the product, try again later",{toastId:3,type:"error"})}).catch(()=>{P.error("Error moving the product, try again later",{toastId:2,type:"error"})}).finally(()=>{f(!1)})},D=()=>{B()},W=b=>b.includes("amazon.com")?"amazon":b.includes("kroger.com")?"kroger":b.includes("walmart.com")?"walmart":b.includes("target.com")?"target":void 0;return e.jsx(e.Fragment,{children:e.jsxs(se,{modalWidth:"70%",showCloseBtn:!0,shouldShow:s,onClose:v,shouldClose:!0,className:"movemodal w-[200px] p-12",textColor:"text-purple-500",children:[C?e.jsxs("h4",{className:"fw-600 sm:text-md text-3xl md:text-xl sm:max-w-[90%] sm:text-lg",children:["Finding exact or similar products at ",l]}):x?e.jsx("h4",{className:"fw-600 sm:text-md text-3xl md:text-xl sm:max-w-[90%] sm:text-lg",children:"Replace with exact or similar product"}):e.jsx("h4",{className:"fw-600 sm:text-md text-3xl md:text-xl sm:max-w-[90%] sm:text-lg",children:"Confirm your selection"}),e.jsxs("div",{className:"similar_product_head mt-10 flex items-center justify-between gap-3 rounded-xl  md:mt-6  sm:block",children:[e.jsxs("div",{className:"flex w-10/12 items-start gap-3 sm:w-full",children:[e.jsx("div",{className:"w-2/12 sm:mb-5 sm:w-3/12",children:e.jsx("img",{src:t==null?void 0:t.productThumbnailUri,alt:"",className:"h-full max-h-[100px] w-full touch-none object-contain pr-5 sm:pr-0"})}),e.jsxs("div",{className:"w-5/12  sm:mb-4 sm:w-9/12",children:[e.jsx("p",{className:"text-md fw-400",children:t.productName}),e.jsx("p",{className:"fw-500 mt-3 text-xl",children:(H=t==null?void 0:t.totalPrice)==null?void 0:H.displayValue})]})]}),e.jsx("div",{className:"w-1/12 sm:w-4/12",children:e.jsx("img",{src:y()??"",alt:""})})]}),e.jsx("div",{children:C?e.jsx(Gs,{}):x?d!=null&&d.data.similarProducts.length?e.jsxs("div",{className:"similar-products-main",children:[e.jsx("h5",{className:"gray_color sm:text-md mb-7 mt-9 text-xl uppercase",children:"Similar Products"}),e.jsx("div",{className:"flex h-80 flex-wrap gap-4 overflow-y-scroll",children:d==null?void 0:d.data.similarProducts.map((b,E)=>e.jsx(Vs,{title:b.name,price:b.retailPrice.amount,store:b.storeName,setShowSimilarProducts:()=>g(b),image:b.images.thumbnail.uri,reviewsSummary:b.reviewsSummary,disCount:b.isDiscounted&&b.sellingPrice.amount},E))})]}):e.jsxs("div",{className:"py-4 pt-16 text-center text-base font-semibold",children:["No matches found at ",l]}):e.jsxs("div",{children:[e.jsx("h5",{className:"gray_color sm:text-md mb-7 mt-9 text-xl uppercase",children:"Replace Item"}),e.jsxs("div",{className:"replace-product-main relative flex justify-between sm:block",children:[e.jsx("img",{src:Ws,alt:"",className:"right-arrow w-8"}),e.jsx("div",{className:"w-5/12 sm:mb-20 sm:w-full",children:e.jsx(ke,{productImg:t==null?void 0:t.productThumbnailUri,productlogo:(t==null?void 0:t.productLink)&&W(t==null?void 0:t.productLink),description:t==null?void 0:t.productName,price:(O=t==null?void 0:t.totalPrice)==null?void 0:O.amount.toString()})}),e.jsx("div",{className:"w-5/12 sm:mt-20 sm:w-full",children:e.jsx(ke,{productImg:(R=(F=h==null?void 0:h.images)==null?void 0:F.medium)==null?void 0:R.uri,productlogo:W(h==null?void 0:h.link),description:h==null?void 0:h.name,price:(k=h==null?void 0:h.sellingPrice)==null?void 0:k.amount})})]}),e.jsxs("div",{className:"mx-auto mt-10 flex w-8/12 justify-center gap-5 sm:block sm:w-full",children:[e.jsx(L,{variant:"outline",className:"mb-5",onClick:()=>{m(!0)},children:"Back to similar products list"}),e.jsx(L,{colorTheme:"purple",variant:"filled",disabled:p,onClick:()=>{D()},children:"Replace"})]})]})})]})})},Se=({exclude:s,openModal:t,setTargetCart:a})=>{const{isPending:l}=U(),{carts:r}=K(),n=r.map(i=>i.storeName.toLowerCase()),[c,x]=o.useState(!1),m=o.useRef(null),w=[{label:"Move to",image:""},{label:"Kroger",image:"/assets/kroger.png"},{label:"Target",image:"/assets/target.svg"},{label:"Walmart",image:"/assets/walmart.svg"},{label:"Amazon",image:"/assets/amazon.png"}].filter(i=>i.label.toLowerCase()==="move to"||i.label.toLowerCase()!==s.toLowerCase()&&n.includes(i.label.toLowerCase())),p=w[0],f=i=>{x(!1),a(i==null?void 0:i.label),t()};return o.useEffect(()=>{const i=u=>{m.current&&!m.current.contains(u.target)&&x(!1)};return!l&&document.addEventListener("mousedown",i),()=>{!l&&document.removeEventListener("mousedown",i)}},[l]),w.length<2?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[l&&e.jsx(J,{label:Y,showTooltip:l,children:e.jsx("div",{className:"dropdown-header-disabled",children:e.jsx("span",{className:"text-[#767879]",children:"Move to"})})}),!l&&e.jsxs("div",{className:"dropdown-container",ref:m,children:[e.jsx("div",{className:"dropdown-header",onClick:()=>x(!c),children:e.jsx("span",{className:"text-[#461256]",children:p.label})}),c&&e.jsx("div",{className:"dropdown-list",children:w.map(i=>e.jsxs("div",{className:"dropdown-option",onClick:()=>f(i),children:[i.image&&e.jsx("img",{src:i.image,alt:i.label,style:{width:"20px",height:"20px",marginRight:"8px"}}),i.label]},i.label))})]})]})},Ks=({itemId:s,source:t,maxQuantity:a,currentQuantity:l,style:r,isCircular:n=!0,onLoadingChange:c})=>{const{getItemInCartQuantity:x,increaseItemInCartQuantity:m,decreaseItemInCartQuantity:h}=K(),{isPending:w}=U(),[p,f]=o.useState(!1),[i,u]=o.useState(!1),[d,C]=o.useState(l??x(s,t)),[g,v]=o.useState(w);o.useEffect(()=>{v(w)},[w]),o.useEffect(()=>{C(l||x(s,t)),u(l==a||d>=a)},[d,x,s,t,l,a]);const N=async O=>{var F,R,k,b,E,T;if(O.stopPropagation(),O.preventDefault(),!(g||p||i)){f(!0),c==null||c(!0);try{await m(s,t)}catch(j){((k=(R=(F=j==null?void 0:j.response)==null?void 0:F.data)==null?void 0:R.Error)==null?void 0:k.ErrorCode)===$e?Q(es,"error",2):((T=(E=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:E.Error)==null?void 0:T.ErrorCode)===ee?Q(Y,"error",2):Q("An error occurred, please try again later.","error",5)}finally{c==null||c(!1),f(!1)}}},y=async O=>{var F,R,k;if(O.stopPropagation(),O.preventDefault(),!(g||p||d<=0)){f(!0),c==null||c(!0);try{await h(s,t)}catch(b){((k=(R=(F=b==null?void 0:b.response)==null?void 0:F.data)==null?void 0:R.Error)==null?void 0:k.ErrorCode)===ee?Q(Y,"error",6):Q("An error occurred, please try again later.","error",2)}finally{f(!1),c==null||c(!1)}}},B=I("h-5 w-5",{"":r==="filled","":r!=="filled","cursor-not-allowed ":p||g}),D=I({"":r==="filled","":r!=="filled"}),W=I("flex-shrink-0 text-xl",D,{absolute:d===0,"cursor-not-allowed ":p||g}),H=n?I(" flex w-fit select-none items-center",{"":r==="filled","":r!=="filled"}):I("flex h-[60px] w-full cursor-pointer items-center rounded-lg border border-solid text-base font-bold",{"bg-green-500":r==="filled","border border-green-500":r!=="filled","justify-between":d,"justify-center":!d,"hover:bg-green-300":!p&&!g,"rounded-lg bg-green-500 text-white-100":r==="filled"});return e.jsx(J,{label:Y,showTooltip:g,children:e.jsx("button",{"data-testid":"button-container","data-no-dnd":"true",className:I(H),onClick:d===0?N:void 0,disabled:p,children:n?e.jsx(e.Fragment,{children:d===0?e.jsx("button",{onClick:p?void 0:N,children:e.jsx(_e,{"data-testid":"plus",className:I(B)})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"blck_color bg-gray-100 flex h-9 w-9 items-center justify-center rounded-full text-center",children:e.jsx("button",{onClick:p?void 0:y,children:e.jsx(ue,{"data-testid":"minus",className:I(B)})})}),e.jsx("span",{className:"fw-600 ml-0 w-9 text-sm text-purple-400",children:d}),e.jsx("div",{className:"blck_color bg-gray-100 flex h-9 w-9 items-center justify-center rounded-full text-center",children:e.jsx("button",{disabled:i,onClick:p?void 0:N,children:e.jsx(he,{"data-testid":"plus",className:I(B,{"cursor-not-allowed opacity-50":i,"":r!=="filled"})})})})]})}):e.jsxs(e.Fragment,{children:[d>0&&e.jsx("div",{className:I("ml-10 flex h-full flex-grow cursor-pointer items-center justify-start",B),children:e.jsx("button",{onClick:p?void 0:y,children:e.jsx(ue,{"data-testid":"minus",size:30,className:I(D)})})}),e.jsx("span",{"data-testid":"quantity",className:W,onClick:d===0?N:void 0,children:d===0?"Add to cart":d}),d>0&&e.jsx("button",{className:"mr-10 flex h-full flex-grow cursor-pointer items-center justify-end",onClick:N,disabled:i,children:e.jsx(he,{"data-testid":"plus",size:a>d?30:25,className:I(B,{"cursor-not-allowed opacity-50":i,"text-green-100":r!=="filled"})})})]})})})},Zs=o.memo(Ks),de=({item:s,type:t,cart:a,children:l,CheckoutComponent:r})=>{var i,u,d;const[n,c]=o.useState(!1),[x,m]=o.useState(!1),[h,w]=o.useState(""),p=C=>{c(C)},f=()=>{m(!1),w("")};return e.jsxs(e.Fragment,{children:[(s==null?void 0:s.quantity)>0&&(s==null?void 0:s.productThumbnailUri)&&e.jsxs("div",{className:"relative ",children:[n&&e.jsx(ws,{tint:ss.dark}),e.jsx("div",{className:"flex w-full  justify-between",children:e.jsxs("div",{className:"flex w-full flex-row items-start gap-1 sm:gap-2",children:[l,e.jsxs("div",{className:"confurm_item flex gap-4",children:[e.jsx("div",{className:" w-4/12 sm:mr-0 sm:w-3/12",children:e.jsx(q,{to:oe.product_detail(encodeURIComponent(s.productId??"")),style:{WebkitTouchCallout:"none",userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"},children:e.jsx("img",{className:" w-full touch-none rounded-md  object-contain",src:s.productThumbnailUri})})}),e.jsxs("div",{className:"w-8/12 sm:w-9/12",children:[e.jsx("div",{className:"fw-500 ProductItemTitle text-md line-clamp-2 select-none  break-before-all whitespace-normal",children:e.jsxs(q,{to:oe.product_detail(encodeURIComponent(s.productId??"")),style:{WebkitTouchCallout:"none",userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"},children:[Z((s==null?void 0:s.productName)??"")," ",e.jsx("br",{})]})}),e.jsx("div",{className:"mt-3 hidden xl:block sm:block sm:w-6/12",onClick:C=>{C.preventDefault(),C.stopPropagation()},children:e.jsx(Se,{exclude:a.storeName,openModal:()=>m(!0),setTargetCart:w})}),e.jsx("div",{className:" fw-600 mt-3 text-xl sm:hidden sm:text-sm",children:(i=s.totalPrice)==null?void 0:i.displayValue.split(" ")[0]}),e.jsxs("div",{className:"mt-5 flex items-center lg:block sm:mt-3 sm:flex sm:justify-between",children:[e.jsx("div",{className:" fw-600  hidden text-xl sm:block sm:text-sm",children:(u=s.totalPrice)==null?void 0:u.displayValue.split(" ")[0]}),e.jsxs("div",{className:"flex w-1/2     sm:justify-end",children:[t===G.ACTIVE&&e.jsx(e.Fragment,{children:e.jsx(Zs,{maxQuantity:((d=s.additionalAttributes)==null?void 0:d.maxOrderQuantity)??s.quantity,onLoadingChange:p,currentQuantity:s.quantity,itemId:s.productId,source:a.storeName,style:"outline"})}),t===G.HISTORY&&e.jsx("div",{className:"mt-1 self-end rounded-lg border border-green-500 bg-white-100 p-[2px] px-2 text-green-500",children:e.jsxs("p",{className:"flex items-center self-end text-xs",children:[e.jsx("span",{className:"mb-[1px] text-[11px]",children:"x"}),e.jsx("span",{className:"ml-[1px]",children:s.quantity})]})})]}),e.jsx("div",{className:"w-1/2 xl:hidden lg:mt-3 lg:w-9/12 sm:hidden",children:e.jsx("div",{onClick:C=>{C.preventDefault(),C.stopPropagation()},children:t===G.ACTIVE&&e.jsx(Se,{exclude:a.storeName,openModal:()=>m(!0),setTargetCart:w})})}),r]})]})]})]})})]}),x&&e.jsx(Ys,{isOpen:x,item:s,onClose:()=>f(),targetCart:h,activeCartId:a.id})]})},ye="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14%2018V6C14%205.46957%2013.7893%204.96086%2013.4142%204.58579C13.0391%204.21071%2012.5304%204%2012%204H4C3.46957%204%202.96086%204.21071%202.58579%204.58579C2.21071%204.96086%202%205.46957%202%206V17C2%2017.2652%202.10536%2017.5196%202.29289%2017.7071C2.48043%2017.8946%202.73478%2018%203%2018H5M5%2018C5%2019.1046%205.89543%2020%207%2020C8.10457%2020%209%2019.1046%209%2018M5%2018C5%2016.8954%205.89543%2016%207%2016C8.10457%2016%209%2016.8954%209%2018M15%2018H9M15%2018C15%2019.1046%2015.8954%2020%2017%2020C18.1046%2020%2019%2019.1046%2019%2018M15%2018C15%2016.8954%2015.8954%2016%2017%2016C18.1046%2016%2019%2016.8954%2019%2018M19%2018H21C21.2652%2018%2021.5196%2017.8946%2021.7071%2017.7071C21.8946%2017.5196%2022%2017.2652%2022%2017V13.35C21.9996%2013.1231%2021.922%2012.903%2021.78%2012.726L18.3%208.376C18.2065%208.25888%2018.0878%208.16428%2017.9528%208.0992C17.8178%208.03412%2017.6699%208.00021%2017.52%208H14'%20stroke='%232DB089'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",zs=({totalPrice:s,deliveryFees:t,isFreeShippingEligible:a,shippingNote:l,date:r,type:n,showShipping:c=!0})=>e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("div",{className:"flex w-full",children:r&&n==G.HISTORY&&e.jsx("p",{className:"mb-1 text-[12px] font-normal opacity-70",children:ts(as(r),"MM/dd/yyyy")})}),e.jsx("div",{className:"flex w-full justify-end gap-3",children:e.jsx("div",{className:" flex w-full flex-col  sm:mr-0",children:e.jsxs("ul",{className:"space-y-0",children:[e.jsxs("li",{className:"flex items-center justify-end gap-4 sm:hidden",children:[e.jsx("div",{children:c&&e.jsx("div",{className:"sm:hidden",children:a?e.jsx(J,{label:l??"",showTooltip:!!l,children:e.jsx("li",{className:I(l&&"cursor-pointer","flex justify-end"),children:e.jsx("span",{className:"sm:flex-end fw-500 freeshipping mt-3 flex flex-row items-center rounded-full border p-2 px-4 text-sm",children:"Free Shipping"})})}):e.jsx("li",{className:"shipping-feemain flex justify-end",children:e.jsxs("span",{className:"sm:flex-end shipping-feemain fw-500 freeshipping relative mt-3 flex flex-row items-center rounded-full border p-2 px-4 text-sm",children:[e.jsx("img",{src:ye,alt:"shipping Fee",className:"pr-3"}),e.jsx("span",{className:"text-black",children:t==null?void 0:t.displayValue}),e.jsx("span",{className:"shipping-fee text-sm text-white-700 ",children:"Shipping Fee"})]})})})}),e.jsxs("div",{children:[e.jsx("span",{className:" text-md fw-500 text-white-700 sm:text-sm",children:"Total"}),e.jsx("span",{className:"-mt-1  block text-[14px] opacity-50 sm:text-[10px]",children:"(excl. tax)"})]}),e.jsx("span",{className:"fw-700 text-purple text-right text-2xl sm:hidden",children:s==null?void 0:s.displayValue})]}),e.jsx("li",{className:"flex hidden items-center justify-evenly gap-4 sm:block",children:e.jsxs("div",{className:"flex w-full flex-col sm:block",children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex w-full flex-col text-right sm:w-auto",children:[e.jsx("span",{className:"text-md fw-500 text-center text-white-700 sm:text-2xl",children:"Total"}),e.jsx("span",{className:"-mt-1 block text-center text-[14px] opacity-50",children:"(excl. tax)"})]}),e.jsx("div",{className:"fw-700 text-purple -mt-8 mr-2 w-full text-center text-2xl sm:w-auto",children:s==null?void 0:s.displayValue})]}),c&&e.jsx("div",{className:"-mt-6 flex w-full justify-center sm:w-auto sm:justify-end",children:a?e.jsx(J,{label:l??"",showTooltip:!!l,children:e.jsx("li",{className:I(l&&"cursor-pointer","flex w-full justify-end sm:w-auto"),children:e.jsx("span",{className:"fw-500 freeshipping flex w-full flex-row items-center rounded-full border p-1 px-2 text-center text-[12px] sm:w-auto",children:"Free Shipping"})})}):e.jsx("li",{className:"shipping-feemain flex w-full justify-end sm:w-auto",children:e.jsxs("span",{className:"fw-500 freeshipping flex w-full flex-row items-center rounded-full border p-1 px-2 text-center text-sm sm:w-auto",children:[e.jsx("img",{src:ye,alt:"shipping Fee",className:"pr-3"}),e.jsx("span",{className:"text-black",children:t==null?void 0:t.displayValue}),e.jsx("span",{className:"shipping-fee text-sm text-white-700",children:"Shipping Fee"})]})})})]})})]})})})]}),qs=()=>{const s=Te(),t=`https://api.kroger.com/v1/connect/oauth2/authorize?scope=cart.basic:write&response_type=code&client_id=${s==null?void 0:s.KROGER_CLIENT_ID}&redirect_uri=${encodeURIComponent((s==null?void 0:s.KROGER_REDIRECT_URL)||"")}`,{isPending:a}=U(),{user:l}=o.useContext(ie),[r,n]=ce(),[c,x]=o.useState(!1),m=()=>{localStorage.getItem("isPvrpleAuthenticated")&&l?h():(localStorage.getItem("isPvrpleAuthenticated")?r.set("auth","profile"):r.set("auth","signin"),n(r))},h=()=>{window.location.href=`${t}`};return e.jsx(J,{label:Y,showTooltip:a,children:e.jsxs(e.Fragment,{children:[c&&e.jsx(X,{message:"You'll be taken to a login page where KARTIE can help add your items to Kroger for you.",title:"Redirecting",type:"link",cancelBtnText:"Keep shopping",confirmBtnText:"Proceed",confirm:()=>{m()},dismiss:()=>{x(!1)}}),e.jsx("div",{className:"flex w-36",children:e.jsx(L,{colorTheme:"purple",variant:"filled",onClick:()=>x(!0),disabled:a,children:"Checkout"})})]})})},Xs=({cart:s,type:t,removeCart:a,onCheckoutClicked:l,isCheckoutInProgress:r})=>{const[n,c]=o.useState(!1),{isPending:x}=U();function m(){c(!0)}return e.jsxs(e.Fragment,{children:[n&&e.jsx(X,{message:`Are you sure you want to delete ${s.storeName.charAt(0).toUpperCase()+s.storeName.slice(1)}'s cart?`,title:"Delete Cart",type:"action",confirmBtnText:"Delete",cancelBtnText:" No",confirm:()=>{a(),c(!1)},dismiss:()=>{c(!1)}}),e.jsx("div",{className:"cart_list_h overflow-y-auto p-4 pt-0 sm:mt-5 sm:p-0",children:e.jsx(ls,{className:"cart_List flex flex-wrap gap-4",renderItem:h=>e.jsx(de,{cart:s,type:t,item:h},h.id),items:s.cartItems??[]},s.id)}),t===G.ACTIVE&&e.jsxs("div",{className:" flex items-center justify-between  border-t p-6 sm:p-3",style:{borderColor:"#DCDFE0",boxShadow:"0px -5px 21px 0px #00000017"},children:[e.jsx("div",{className:"sm:hidden",children:e.jsx(J,{label:Y,showTooltip:x,children:e.jsx("div",{className:"flex w-36",children:e.jsx(_,{colorTheme:"red",variant:"outline",className:"delete-btn",onClick:m,disabled:r||x,children:"Delete Cart"})})})}),e.jsx("div",{className:"hidden w-[15%] sm:block",children:e.jsx("div",{className:"flex items-center",children:e.jsx("button",{className:"gray_color",type:"button",onClick:m,children:e.jsx("img",{src:"/assets/delete.svg",alt:"delete"})})})}),e.jsx("div",{className:"flex   w-8/12 items-center  justify-end sm:w-full",children:e.jsx(J,{label:Y,showTooltip:x,children:e.jsxs("div",{className:"items:center flex  w-full md:justify-end sm:justify-between",children:[e.jsx("div",{className:"mr-4 w-9/12 sm:w-7/12",children:e.jsx(zs,{totalPrice:s.totalPrice,storeName:s.storeName,deliveryFees:s.totalShippingPrice,isFreeShippingEligible:s.isFreeShippingEligible,shippingNote:s.shippingNote})}),e.jsx("div",{className:"w-3/12 sm:w-4/12",children:s.storeName==="kroger"||s.storeName==="Kroger"?e.jsx(qs,{}):e.jsx(_,{colorTheme:"purple",variant:"filled",onClick:l,disabled:r||x,children:"Checkout"})})]})})})]})]})};function _s(s){return rs({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 7h10v10"}},{tag:"path",attr:{d:"M7 17 17 7"}}]})(s)}const re={"carousel-button":"_carousel-button_19e6r_1","li-item":"_li-item_19e6r_9"},$s=({items:s,renderItem:t,className:a,scrollable:l=!1})=>{const r=o.useRef(null),n=o.useRef(null),[c,x]=o.useState(!1),[m,h]=o.useState(!1),[w,p]=o.useState(!1),[f,i]=o.useState(0);o.useEffect(()=>{n.current&&i(n.current.offsetWidth)},[]);const u=o.useCallback(()=>{if(r.current){const C=r.current.offsetWidth,g=r.current.scrollWidth,v=r.current.scrollLeft,N=v===0,y=v+C>=g;x(!N),h(!y)}},[]);o.useEffect(()=>{u()},[s,u]),o.useEffect(()=>{if(r.current&&l){const C=r.current.offsetWidth,v=r.current.scrollWidth>C;h(v),p(v)}},[l,s]);const d=o.useCallback(C=>{if(r.current){const g=C*f;r.current.scrollTo({left:r.current.scrollLeft+g,behavior:"smooth"})}},[f]);return e.jsxs("div",{className:"target-list relative mb-5 mt-10 h-48 w-full overflow-y-scroll",children:[l&&c&&e.jsx("button",{className:I(re["carousel-button"],"left-0 z-10 rounded-3xl bg-white-100 p-2 shadow-xl hover:bg-white-600 "),onClick:()=>d(-1),children:e.jsx(os,{className:"text-purple-500"})}),e.jsx("ul",{className:I(a,l&&w&&"overflow-y-hidden overflow-x-scroll"," flex flex-wrap gap-4"),ref:r,onScroll:u,children:s.map((C,g)=>e.jsx("li",{className:re["li-item"],ref:n,children:t(C)},g))}),l&&m&&e.jsx("button",{className:I(re["carousel-button"],"side_list right-0 rounded-3xl bg-white-100 p-2 shadow-xl hover:bg-white-400"),onClick:()=>d(1),children:e.jsx(ns,{className:"text-purple-500"})})]})},et=({cart:s,type:t,coupons:a,removeCart:l,checkoutCart:r,isCollapsable:n})=>{const[c,x]=o.useState(!1),[m,h]=ce(),w=m.get("code"),p=ne("(max-width: 639px)"),[f,i]=o.useState(!1),[u,d]=o.useState(!1),[C,g]=o.useState(""),[v,N]=o.useState(!0),{user:y}=o.useContext(ie),B=()=>{localStorage.getItem("isPvrpleAuthenticated")?m.set("auth","profile"):m.set("auth","signin"),h(m)},D=({showCheckoutBtn:k,internalCheckoutClicked:b,item:E})=>e.jsx("div",{className:"mr-20 mt-2 flex h-full w-full cursor-pointer items-center",onClick:T=>{T.preventDefault(),T.stopPropagation()},children:k&&E.productLink&&e.jsxs("button",{onClick:()=>{b(),window.open(E.productLink,"_blank")},className:"text-md flex items-center text-purple-500  hover:text-purple-600",children:["Checkout ",e.jsx(_s,{className:"mr-1 text-xl"})]})}),W=pe({onSuccess:k=>(x(!1),k.checkoutUrl?(g(k.checkoutUrl),d(!1),i(!0)):(g(""),i(!1),d(!0))),onError:k=>{Q(k.response.data.error.errorCode===ee?fe:ge,"error",7),x(!1)},onMutate:()=>{x(!0)}}),H=pe({onSuccess:()=>(g("https://www.kroger.com/cart"),i(!0)),onError:k=>(Q(k.response.data.error.errorCode===ee?fe:ge,"error",7),x(!1),k),onMutate:()=>{x(!0)}}),O=()=>{m.get("code")&&(m.delete("code"),h(m))},F=()=>{if(y==null){B();return}i(!0),W.mutate({cartId:s.id,code:void 0})},R=Oe({onSuccess:()=>{r(),i(!1),d(!1)},onError:()=>{}});return o.useEffect(()=>{let k=!1;(async()=>{var E;try{w&&((E=s.storeName)!=null&&E.toLowerCase().includes("kroger"))&&!k&&(i(!0),await H.mutateAsync({cartId:s.id,code:w}).finally(()=>{x(!1)})&&(k=!0,i(!0)))}catch{i(!1),P.error("Something went wrong. Please try again.",{type:"error"})}})()},[]),e.jsxs(e.Fragment,{children:[s&&f&&e.jsx(X,{message:`You will be redirected to ${s.storeName.charAt(0).toUpperCase()+s.storeName.slice(1)}'s website to complete your purchase`,title:"Redirecting",type:"link",icon:"/assets/redirecting.svg",link:C,cancelBtnText:"Keep Shopping",confirmBtnText:"Proceed",isLoading:c,confirm:()=>{r(),i(!1),O()},dismiss:()=>{R.mutate({cartId:s.id})}}),s&&u&&e.jsx(X,{message:"Please checkout each item individually until our new system is ready!",messageStyle:"text-sm text-white-700",title:"Redirecting",icon:"/assets/redirecting.svg",type:"link",link:C,cancelBtnText:"Keep Shopping",confirmBtnText:"Checkout Completed",isCheckoutDisabled:v,tooltipLabel:"Checkout at least one item before marking checkout as completed",confirm:()=>{r(),N(!0),d(!1)},dismiss:()=>{N(!0),R.mutate({cartId:s.id})},width:"45%",children:e.jsx($s,{renderItem:k=>e.jsx(de,{cart:s,type:G.CONFIRMATION,item:k,showCheckoutBtn:!0,internalCheckoutClicked:()=>{N(!1)},CheckoutComponent:e.jsx(D,{showCheckoutBtn:!0,item:k,internalCheckoutClicked:()=>{N(!1)}})}),items:s.cartItems??[]},s.id)}),e.jsx("div",{className:I({"relative ":!n&&!p},"h-124 max-h-124 rounded-lg md:h-auto "),children:s&&e.jsx(Xs,{isCheckoutInProgress:c,onCheckoutClicked:F,removeCart:l,cart:s,type:t,coupons:a??[]})})]})},st=({item:s,type:t,cart:a,isChecked:l,onCheckboxChange:r})=>e.jsx("div",{className:"confirmitem_main w-6/12 sm:w-full",children:e.jsx(de,{item:s,type:t,cart:a,children:e.jsx("div",{className:"flex h-full cursor-pointer items-center",onClick:n=>{n.preventDefault(),n.stopPropagation()},children:e.jsx("input",{type:"checkbox",id:"termsCheckbox",className:"checkbox_input mr-4 p-2",checked:l,onChange:r})})})}),tt=({cart:s,closeCart:t})=>{const a=s.cartItems??[],{refetchCarts:l}=K(),{refetch:r}=ae(!1,!1),[n,c]=o.useState({}),x=Oe({onSuccess:()=>{l(),t(!1)},onError:()=>{P.error("Something went wrong. Please refresh and try again.",{toastId:2,type:"error"})}}),m=is({onSuccess:()=>{t(!0),l(),r(),P.success("Successfully confirmed purchase",{toastId:1,type:"success"})},onError:()=>{P.error("Something wrong happened",{toastId:2,type:"error"})}}),h=()=>{const u=Object.keys(n).filter(d=>n[d]);m.mutate({cartId:s.id,confirmedIds:u})};o.useEffect(()=>{if(a){const u={};a.forEach(d=>{u[d.id]=!0}),c(u)}},[a]);const w=u=>{c(d=>({...d,[u]:!d[u]}))},p=()=>{x.mutate({cartId:s.id})},f=()=>{var u;return e.jsx("div",{className:"px-14 md:px-3 sm:px-3",children:e.jsxs("div",{className:"confirm_head flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex w-2/12 items-center sm:w-4/12",children:[e.jsx(cs,{store:s.storeName}),e.jsxs("div",{className:"text-gray-200 ml-3 text-base",children:["(",a==null?void 0:a.length,")",(a!=null&&a.length&&(a==null?void 0:a.length)>1,"")]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"mr-5 text-right",children:[e.jsx("span",{className:"text-md fw-500 text-gray-300 sm:text-sm",children:"Total"}),e.jsx("span",{className:"text-gray-400 -mt-1 block text-[14px] opacity-75 sm:text-[10px]",children:"(excl. tax)"})]}),e.jsx("span",{className:"fw-700 text-2xl text-purple-500 sm:text-lg",children:(u=s.totalPrice)==null?void 0:u.displayValue})]})]})})},i=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex max-h-96 flex-wrap overflow-y-scroll px-14 md:px-3 sm:block  sm:max-h-60 sm:px-3",children:a&&a.map(u=>e.jsx(st,{cart:s,item:u,type:G.PENDING,isChecked:n[u.id],onCheckboxChange:()=>w(u.id)},u.id))}),e.jsxs("div",{className:"confirm_bottom flex justify-center gap-5",children:[e.jsx("div",{className:" w-4/12 sm:w-5/12",children:e.jsx(L,{colorTheme:"purple",className:"w-full",variant:"outline",onClick:p,children:"Keep Shopping"})}),e.jsx("div",{className:" w-4/12 sm:w-5/12",children:e.jsx(L,{colorTheme:"purple",variant:"filled",onClick:h,children:"Confirm"})})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(i,{})]})},at=()=>{const{carts:s,isLoading:t,deleteCart:a,refetchCarts:l,moveProduct:r}=K(),{isPending:n}=U(),[c,x]=o.useState(""),[m,h]=o.useState(""),[w,p]=o.useState(!1),[f,i]=o.useState(0),[u,d]=o.useState([]),[C,g]=o.useState([]),[v,N]=o.useState({}),{data:y,isLoading:B,refetch:D}=ds(),{user:W}=o.useContext(ie),[H]=ce();o.useEffect(()=>{l()},[]),o.useEffect(()=>{const j=u.sort((A,M)=>A.storeName<M.storeName?-1:A.storeName>M.storeName?1:0);g(j)},[u]),o.useEffect(()=>{t||d(s)},[s,t]),o.useEffect(()=>{t||d(s)},[s,d,t]),o.useEffect(()=>{W!=null&&!H.get("code")&&D()},[D,H]);const O=j=>{a(j).then(A=>{i(0),A?P.success("Successfully deleted cart",{toastId:1,type:"success"}):P.error("Error deleting, try again later",{toastId:1,type:"error"})}).catch(()=>{P.error("Error deleting, try again later",{toastId:1,type:"error"})})},F=()=>{l(),D()},R=()=>{l(),D()},k=(j,A)=>{r(j,c,A,m).then(M=>{M?P.success("The product is successfully moved",{toastId:2,type:"success"}):P.error("Error moving the product, try again later",{toastId:3,type:"error"})}).catch(()=>{P.error("Error moving the product, try again later",{toastId:2,type:"error"})})};if(t)return e.jsx("div",{className:"m-28",children:e.jsx(Le,{size:45})});const b={dots:!1,infinite:!0,speed:500,arrows:!0,slidesToShow:3,slidesToScroll:2,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0}}]},E=j=>{i(j)},T=j=>{var A;return(A=j.cartItems)==null?void 0:A.reduce((M,V)=>M+(V.quantity??0),0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:block sm:p-0",children:[e.jsx("div",{className:"w-3/12 sm:mb-5 sm:w-full",children:e.jsx("h3",{className:"fw-400 text-2xl",children:"My Cart"})}),e.jsx("div",{className:"relative w-8/12 sm:w-full",children:e.jsx("div",{className:"cart_tabs relative overflow-hidden sm:w-full",children:C.length>3?e.jsx(fs,{...b,children:C.map((j,A)=>{var V;const M=(V=j.storeName)==null?void 0:V.toLowerCase();return e.jsxs(e.Fragment,{children:[M==="amazon"&&e.jsx(ve,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A),isSliderView:!0}),M==="target"&&e.jsx(Ne,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A),isSliderView:!0}),M==="kroger"&&e.jsx(be,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A),isSliderView:!0}),M==="walmart"&&e.jsx(Ae,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A),isSliderView:!0})]})})}):e.jsx("div",{className:"tab__btns flex justify-end gap-2",children:C.map((j,A)=>{var V;const M=(V=j.storeName)==null?void 0:V.toLowerCase();return e.jsxs(e.Fragment,{children:[M==="amazon"&&e.jsx(ve,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A)}),M==="target"&&e.jsx(Ne,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A)}),M==="kroger"&&e.jsx(be,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A)}),M==="walmart"&&e.jsx(Ae,{cart:j,isActiveTab:f===A,cartQuantity:T(j),handleTabClick:()=>E(A)})]})})})})})]}),!n&&!B&&y&&y.rows.length>0&&e.jsxs($,{shouldShow:y.rows.length>0,onClose:()=>{},className:"cofirmPurchaseModal",children:[e.jsx("div",{className:"px-14 md:px-3 sm:px-3",children:e.jsxs("div",{className:"info-box text-md flex items-start text-black-700 sm:text-sm",children:[e.jsx(ms,{className:"mr-2 mt-1 sm:w-20"}),"Confirm your purchase so KARTIE can store your cart history and smart savings, and provide you with future personalized suggestions. Otherwise click on Keep Shopping!"]})}),e.jsxs("div",{className:"flex flex-col flex-wrap",children:[e.jsx("div",{className:"fw-500 my-6 px-14 text-3xl text-black-500  md:px-3 sm:px-3 sm:text-xl",children:"Confirm Your Purchase"}),y.rows.map(j=>e.jsx("div",{className:"w-full",children:e.jsx(tt,{cart:j,closeCart:A=>R()})},j.id))]})]}),e.jsx("div",{className:"flex w-full flex-row flex-wrap md:flex-col",children:C&&C.length>0?e.jsx("div",{className:"w-full",children:e.jsx(et,{cart:C[f],type:G.ACTIVE,removeCart:()=>O(C[f].id),checkoutCart:F})}):e.jsxs("div",{className:"flex w-full flex-col text-center",children:[e.jsx("div",{className:"w-full p-5 text-center",children:"Your cart is empty"}),e.jsx("div",{className:"flex w-full flex-col items-center pb-5",children:e.jsx(q,{to:"/",children:e.jsx(L,{colorTheme:"purple",variant:"filled",className:"p-4 px-16",children:"Browse Products"})})})]})}),w&&e.jsx(Cs,{product:v.product,destinationStore:v.destinationStore,originalStore:v.originalStore,closeDialog:v.closeDialog,itemReplacement:j=>k(v.product.id,j)})]})},lt=()=>e.jsx("div",{className:"cart_main rounded-xl border sm:border-0",style:{borderColor:"#DCDFE0"},children:e.jsx("div",{className:"cart_div relative ",children:e.jsx(at,{})})}),rt={[S.new]:void 0,[S.pending]:"90%",[S.success]:"90%",[S.failed]:"90%",[S.cancel]:"90%",[S.killed]:"90%",[S.expired]:void 0,[S.applied]:void 0,[S.toggled]:void 0},ot=s=>rt[s],pt=()=>{const[s,t]=o.useState(!1),[a,l]=o.useState("90%"),{isPending:r,status:n}=U(),{user:c}=Me(),x=xs(),m=us(),{handleLocalState:h}=Ee("userGuide"),[{run:w,steps:p},f]=o.useState({run:!1,steps:[{disableBeacon:!0,locale:{last:"Begin"},title:e.jsx(e.Fragment,{children:e.jsx("h1",{className:"fw-600 text-xl sm:text-lg",children:"Start Saving Smarter!"})}),placement:"auto",target:"#suggestionButton",content:e.jsx(e.Fragment,{children:e.jsx("h1",{className:"fw-400 gray_color text-md w-64 text-left text-sm font-light sm:mt-0 sm:px-0",children:"The Smart Savings feature analyzes your carts, compares prices across vendors, factors in shipping fees and membership perks, and then returns a personalized list of saving suggestions. Click this button to begin your Smart Savings experience."})})},{disableBeacon:!0,locale:{last:"Got it"},title:e.jsx(e.Fragment,{children:e.jsx("h1",{className:"fw-600 text-xl sm:text-lg",children:"Smart Move"})}),placement:"center",target:"body",content:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"fw-400 gray_color text-md text-left text-sm font-light sm:mt-0 sm:px-0",children:"Want to compare similar products in a flash? No problem! Move items between your carts. It's that easy!"}),e.jsx("div",{className:"self-center",children:e.jsx("img",{src:vs,alt:"smart move tutorial"})})]})}]});o.useEffect(()=>{if(!c)return x("/signin",{state:{from:m,replace:!0}})},[c]),o.useEffect(()=>{const g=ot(n??S.new);l(g)},[n]),o.useEffect(()=>{localStorage.getItem("showCartLandingPrompt")===null&&c&&(localStorage.setItem("showCartLandingPrompt","false"),t(!0))},[c]);const[i,u]=o.useState(!1),d=()=>{u(!1)},C=()=>{u(!0)};return e.jsxs("div",{children:[e.jsx(js,{run:w,disableCloseOnEsc:!0,disableOverlayClose:!0,callback:g=>{(g.status=="finished"||g.action=="close")&&(h(z.ACCEPTED),f({run:!1,steps:[]}))},showProgress:!0,steps:p,styles:{options:{primaryColor:"#461256",textColor:"#1c1b1bb9b",width:"fit-content"}},continuous:!0,disableScrolling:!0}),e.jsx("div",{children:e.jsxs("div",{className:"flex gap-5 md:block",children:[e.jsx("div",{className:"w-3/12 gap-4 md:flex md:w-full sm:order-2 sm:mb-4 sm:gap-2",children:e.jsx(Hs,{status:n??S.new,handleSettingsClicked:C})}),e.jsx("div",{className:"w-9/12 md:w-full sm:order-1",children:e.jsx(lt,{})})]})}),e.jsxs(se,{modalWidth:a,showCloseBtn:!0,shouldShow:i,onClose:d,shouldClose:!0,className:"w-[200px] p-12 text-center",textColor:"text-purple-500",children:[e.jsx(Os,{}),i&&!r&&e.jsx(bs,{closePanel:d})]}),e.jsx(se,{shouldShow:s,onClose:()=>t(!1),shouldClose:!0,className:"custom-modal-width kartie75 h-[90vh] w-[768px] max-w-[37%] rounded-lg p-6 text-center",textColor:"text-purple-500",children:e.jsxs("div",{className:" mt-12 ",children:[e.jsx("h4",{className:"fw-600 color-Purple Bright sn:w-full mx-auto w-8/12 text-2xl text-[#62096C] md:text-3xl",style:{textShadow:"0px 0px 10px rgba(234, 137, 219, 0.71)"},children:"75% of KARTIE users found hidden savings using the Smart Savings feature!"}),e.jsxs("div",{className:"sn:w-full mx-auto my-12 flex w-8/12 justify-center gap-4 md:mt-10",children:[e.jsx(_,{variant:"outline",onClick:()=>{t(!1)},children:"Back to Cart"}),e.jsx(_,{onClick:()=>{t(!1),f({run:!0,steps:p})},colorTheme:"purple",variant:"filled",children:"Explore"})]})]})})]})};export{pt as default};
