import{j as e,aK as f,u as j,aL as h,b as v,t as L,r as P,aM as S,x as b,aN as m,aO as N}from"./index-W2AL0DnC.js";import{S as T}from"./index-CNUbkglh.js";const g=({text:i})=>e.jsx("h2",{"data-testid":"title",className:"mb-5 flex items-center text-2xl font-semibold md:text-lg",children:i}),y=()=>{var c;const{data:i,error:x,isLoading:d,refetch:n}=f(),{user:t}=j(),{data:l,isLoading:p}=h(),[r,u]=v(),o=i;return x&&L("Error fetching products","error",8),P.useEffect(()=>{t!=null&&t.id&&n&&n()},[t==null?void 0:t.id,n]),e.jsxs(e.Fragment,{children:[e.jsx(S,{loading:d}),!d&&((c=o==null?void 0:o.data.entries)==null?void 0:c.length)>0&&e.jsxs(e.Fragment,{children:[!p&&l&&!r.get("store")&&e.jsxs("div",{className:"pb-8 pt-4 sm:pt-0",children:[e.jsx(g,{text:"Available Stores"}),e.jsx("div",{className:"grid grid-cols-4 gap-5 md:grid-cols-2 md:gap-5",children:l.data.map((s,a)=>e.jsx(T,{onClick:()=>{r.set("store",s.name),u(r)},children:e.jsx("div",{className:"w-32 p-4 sm:p-8",children:e.jsx(b,{store:s.displayName})})},a))})]}),e.jsx(g,{text:"Trending Products"}),o.data.entries.filter(s=>r.get("store")?s.store.name===r.get("store"):!0).sort((s,a)=>s.store.name===m.kroger?1:a.store.name===m.kroger?-1:0).map((s,a)=>e.jsx(N,{logoHeader:s.store.name,products:s.products,scrollable:!0,layout:r.get("store")?"grid":"flex"},a))]})]})};export{y as Landing,y as default};
