import{j as e,ai as A,V as g,e as i,B as y,m as k,f as C,r as p,L as w,bT as S,bU as B,Y as _,u as T,bQ as D,a0 as L,v as M,aG as $,a9 as v}from"./index-W2AL0DnC.js";const z=({title:c,message:r,messageStyle:n,type:d="action",link:o="",cancelBtnText:m,confirmBtnText:x,confirmColorTheme:l="purple",confirm:t,dismiss:u,openType:a="_blank",children:h,width:j,isLoading:N,btnStyles:b,isCheckoutDisabled:s=!1,tooltipLabel:f})=>e.jsxs(A,{shouldShow:!0,onClose:()=>{},modalWidth:j??"35%",className:j??"max-w-lg p-12 md:p-6",children:[N&&e.jsx("div",{className:"bg-white absolute inset-0 z-50 flex items-center justify-center bg-white-500 bg-opacity-50",children:e.jsx(g,{size:40})}),e.jsxs("div",{className:"flex flex-col flex-wrap",children:[e.jsx("div",{className:"fw-500 text-black mb-5 w-full text-center text-3xl",children:c}),r&&e.jsx("div",{className:"flex items-center pb-2",children:e.jsx("div",{className:i("gray_color mx-auto w-9/12 text-center text-xl",n),children:r})}),h??e.jsx(e.Fragment,{})]}),e.jsxs("div",{className:"mx-auto mt-5 flex w-10/12 gap-4",children:[t&&e.jsx("div",{className:"flex w-full ",children:o&&d==="link"?e.jsx("a",{href:o,target:a,rel:"noreferrer",className:"w-full",children:e.jsx(y,{className:b,colorTheme:l,variant:"outline",onClick:t,children:x})}):e.jsx(k,{label:f??"",showTooltip:s,children:e.jsx("div",{className:"w-full",children:e.jsx(y,{className:"delete-btn",colorTheme:l,variant:"outline",disabled:s,onClick:t,children:x})})})}),e.jsx("div",{className:"flex w-full",children:e.jsx(y,{className:b,colorTheme:"purple",variant:"filled",onClick:u,children:m})})]})]}),E="rounded",F=({className:c,text:r})=>e.jsx("div",{className:i(c,E),children:r}),I=({description:c,actions:r,isDefault:n=!1})=>{const d=C("(max-width: 639px)"),o="hover:underline hover:cursor-pointer  text-end flex items-center fw-500 justify-end",m="flex flex-row sm:block  justify-between  text-base left-40 sm:column-reverse sm:align-start sm:items-start sm:text-xs sm:space-y-2";return e.jsxs("div",{className:i({[""]:n||d},m),children:[e.jsx("p",{className:"fw-400 w-8/12 text-lg sm:w-10/12",children:c}),e.jsxs("div",{className:" action_btn flex  flex-col items-end justify-between gap-2 text-end sm:flex sm:flex-row",style:{width:100},children:[[1,2].map(l=>e.jsx("div",{className:"flex gap-3 ",children:r.filter(t=>t.actionType===l&&(t.scope==="all"||!n)).map((t,u)=>e.jsx(p.Fragment,{children:t.actionType===1?t!=null&&t.to?e.jsx(w,{className:i([t.classNames,o]),to:t==null?void 0:t.to,children:t.title}):e.jsx(w,{className:i([t.classNames,o]),onClick:t==null?void 0:t.onActionClick,to:"",children:t.title}):t.actionType===2?e.jsx("button",{className:i([t.classNames,o]),onClick:t.onActionClick,children:t.title}):null},u))},l)),n&&e.jsx(F,{className:"fw-500 default_btn mt-3",text:"Default"})]})]})},P=()=>{const c=()=>{const{pathname:s}=$();return p.useEffect(()=>{window.scrollTo(0,0)},[s]),null},{data:r,refetch:n,isFetching:d}=S(!0),o=B(),{defaultAddress:m,updateDefaultAddress:x}=p.useContext(_),[l,t]=p.useState(),u=((r==null?void 0:r.data.userAddresses)||[]).sort((s,f)=>(f.isDefaultAddress?1:0)-(s.isDefaultAddress?1:0)),{user:a}=T(),h=[l==null?void 0:l.streetName,l==null?void 0:l.apartmentNumber,l==null?void 0:l.city,[l==null?void 0:l.state,l==null?void 0:l.zipCode].filter(Boolean).join(" ")].filter(Boolean);p.useEffect(()=>{n()},[m,x,n]);const j=s=>{x(s.id,{...s,isDefaultAddress:!0})},N=s=>{o.mutateAsync(s).then(()=>{n(),v.success("Successfully deleted",{toastId:1,type:"success"})}).catch(()=>{n(),v.error("Something went wrong",{toastId:2,type:"error"})})};return e.jsxs(D,{title:"Addresses",action:e.jsx("div",{children:e.jsx(w,{className:i(["text-xl fw-400"]),to:"/address-book/add",style:{color:"#A2428D"},children:"+ Add New Address"})}),children:[e.jsx(c,{}),e.jsxs("div",{style:{borderTop:"1px solid rgb(217, 217, 217)"},className:"mb-20 mt-10 pt-10 sm:mb-10",children:[d&&e.jsx("div",{className:"m-28",children:e.jsx(g,{size:45})}),l&&!d&&e.jsx(z,{message:`Are you certain you want to delete this address from your account:   ${h.join(", ")}?`,title:"Delete Your Address",type:"action",confirmBtnText:"Delete",cancelBtnText:"No",confirm:()=>{N(l.id),t(void 0)},dismiss:()=>{t(void 0)}}),!d&&e.jsx(L,{renderItem:s=>{const f=[{title:e.jsx("img",{src:"/assets/edit.svg",alt:"edit"}),to:M.address_edit(s.id),scope:"all",classNames:" text-xl gray_color ml-4",actionType:1},{title:e.jsx("img",{src:"/assets/delete.svg",alt:"delete"}),classNames:" text-xl gray_color ",scope:"notDefault",actionType:1,onActionClick:()=>{t(s)}},{title:"Set as Default",classNames:" purple_text fw-400 text-base mt-3 sm:mt-0",scope:"notDefault",actionType:2,onActionClick:()=>{j(s)}}];return e.jsx(I,{actions:f,description:e.jsxs(e.Fragment,{children:[s!=null&&s.firstName?[`${s==null?void 0:s.firstName} ${s==null?void 0:s.lastName}`].filter(Boolean).join(" "):[`${a==null?void 0:a.firstName} ${a==null?void 0:a.lastName}`].filter(Boolean).join(" "),e.jsx("br",{}),[s.streetName,s.apartmentNumber].filter(Boolean).join(" "),e.jsx("br",{}),[`${s.city},`,s.state,s.zipCode].filter(Boolean).join(" "),e.jsx("br",{}),s.phoneNumber?s.phoneNumber:a==null?void 0:a.phoneNumber]}),isDefault:s.isDefaultAddress},s.id)},items:u||[],className:"address__listing space-y-2"})]})]})};export{P as default};
