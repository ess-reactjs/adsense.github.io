import{j as t,e as o,f as j,r as u,L as h,bT as N,bU as g,Y as v,bV as S,V as k,G as C,a0 as w,v as L,a9 as f}from"./index-W2AL0DnC.js";const M="rounded",B=({className:l,text:n})=>t.jsx("div",{className:o(l,M),children:n}),D=({description:l,actions:n,isDefault:r=!1})=>{const x=j("(max-width: 639px)"),c="hover:underline hover:cursor-pointer text-sm",d="flex flex-row items-center justify-between p-3 text-base left-40 md:flex-col md:align-start md:items-start md:text-xs md:space-y-2";return t.jsxs("div",{className:o({["rounded-lg border border-white-500"]:r||x},d),children:[t.jsx("p",{className:"w-8/12 text-base font-normal",children:l}),t.jsxs("div",{className:"flex items-center gap-2",children:[n.map((a,i)=>a.scope==="all"||!r?t.jsxs(u.Fragment,{children:[i!==0&&!r&&t.jsx("span",{className:"mx-2 whitespace-nowrap",children:"|"}),a.to&&t.jsx(h,{className:o([a.classNames,c]),to:a.to,children:a.title}),a.onActionClick&&t.jsx("button",{className:o([a.classNames,c]),onClick:a.onActionClick,children:a.title})]},i):null),r&&t.jsx(B,{className:"bg-green-100 px-4 py-2 text-xs font-bold text-green-500",text:"Default"})]})]})},I=()=>{const{data:l,refetch:n,isFetching:r}=N(!0),x=g(),{defaultAddress:c,updateDefaultAddress:d}=u.useContext(v),[e,a]=u.useState(),i=((l==null?void 0:l.data.userAddresses)||[]).sort((s,m)=>(m.isDefaultAddress?1:0)-(s.isDefaultAddress?1:0)),y=[e==null?void 0:e.streetName,e==null?void 0:e.apartmentNumber,e==null?void 0:e.city,e==null?void 0:e.state,e==null?void 0:e.zipCode].filter(Boolean);u.useEffect(()=>{n()},[c,d,n]);const A=s=>{d(s.id,{...s,isDefaultAddress:!0})},b=s=>{x.mutateAsync(s).then(()=>{n(),f.success("Successfully deleted",{toastId:1,type:"success"})}).catch(()=>{n(),f.error("Something went wrong",{toastId:2,type:"error"})})};return t.jsxs(S,{title:"Shipping Address",action:t.jsx("div",{children:t.jsx(h,{className:o(["underline hover:cursor-pointer text-base text-green-500 hover:font-bold"]),to:"/address-book/add",children:"Add"})}),children:[r&&t.jsx("div",{className:"m-28",children:t.jsx(k,{size:45})}),e&&!r&&t.jsx(C,{message:`Are you sure you want to delete this address: ${y.join(", ")} ?`,title:"Remove address",type:"action",cancelBtnText:"No",confirmBtnText:"Delete",confirm:()=>{b(e.id),a(void 0)},dismiss:()=>{a(void 0)}}),!r&&t.jsx(w,{renderItem:s=>{const m=[{title:"Delete",actionType:1,classNames:"text-red-500",scope:"notDefault",onActionClick:()=>{a(s)}},{title:"Edit",to:L.address_edit(s.id),scope:"all",actionType:1,classNames:"text-black-500"},{title:"Set as default",classNames:"text-black-500",actionType:2,scope:"notDefault",onActionClick:()=>{A(s)}}];return t.jsx(D,{actions:m,description:[s.streetName,s.apartmentNumber,s.city,s.state,s.zipCode].filter(p=>(p==null?void 0:p.trim())!=="").join(", "),isDefault:s.isDefaultAddress},s.id)},items:i||[],className:"space-y-2"})]})};export{I as default};
